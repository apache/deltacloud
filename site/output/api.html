<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>
      Deltacloud - Documentation - REST API and Developer Guide
    </title>
    <meta content='' name='keywords' />
    <meta content='' name='description' />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <link href='./styles/favicon.ico' rel='shortcut icon' type='image/x-icon' />
    <link href='./styles/default.css' rel='StyleSheet' title='Main style' type='text/css' />
    <link href='./styles/default-debug.css' rel='Alternate StyleSheet' title='Debug main style' type='text/css' />
  </head>
  <body>
    <div id='header'>
      <div class='container'>
        <div id='headerLogo' onclick="location.href='index.html';" style='cursor: pointer;'>
          <h1>
            Deltacloud - Many clouds. One API. No problem.
          </h1>
        </div>
      </div>
    </div>
    <div id='navigation'>
      <div class='container' id='menu'>
        <ul class='l0'>
          <li>
            <a class='inactive' href='./index.html' title='Deltacloud Home'>Home</a>
          </li>
          <li>
            <a class='inactive' href='./download.html' title='Get the latest releases'>Download</a>
          </li>
          <li>
            <a class='inactive' href='./contribute.html' title='Information about design/development process'>Contribute</a>
          </li>
          <li>
            <a class='active' href='./documentation.html' title='Project documentation'>Documentation</a>
          </li>
        </ul>
      </div>
    </div>
    <div id='subnavigation'>
      <div class='container' id='submenu'>
        <ul class='l1'>
          <li>
            <a class='inactive' href='documentation.html'>
              Overview
            </a>
          </li>
          <li>
            <a class='active' href='api.html'>
              REST API
            </a>
          </li>
          <li>
            <a class='inactive' href='drivers.html'>
              Drivers
            </a>
          </li>
          <li>
            <a class='inactive' href='framework.html'>
              Framework
            </a>
          </li>
          <li>
            <a class='inactive' href='client-ruby.html'>
              Ruby Client
            </a>
          </li>
          <li>
            <a class='inactive' href='libdeltacloud.html'>
              Libdeltacloud
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div id='frontpageHeader'></div>
    <div id='main'>
      <div class='container' id='content-deltacloud'>
        <h1>Apache Deltacloud API</h1>
        
        <p><a name="toc" /></p>
        
        <p><ul>
        <li>
        <a href="#h1">1. Introduction</a>
        <ul>
        <li>
        <a href="#h1_1">1.1 Collections</a>
        </li>
        <li>
        <a href="#h1_2">1.2 Client Requests</a>
        </li>
        <li>
        <a href="#h1_3">1.3 Authentication</a>
        </li>
        <li>
        <a href="#h1_4">1.4 Server responses</a>
        </li>
        <li>
        <a href="#h1_5">1.5 API conventions</a>
        </li>
        <li>
        <a href="#h1_6">1.6 API stability and evolution</a>
        </li>
        <li>
        <a href="#h1_7">1.7 Online documentation</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h2">2. The API entry point</a>
        <ul>
        <li>
        <a href="#h2_1">2.1 Features</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3">3. Compute Resources</a>
        <ul>
        <li>
        <a href="#h3_1">3.1 Realms</a>
        <ul>
        <li>
        <a href="#h3_1_1">GET /api/realms</a>
        </li>
        <li>
        <a href="#h3_1_2">GET /api/realms/:id</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3_2">3.2 Hardware Profiles</a>
        <ul>
        <li>
        <a href="#h3_2_1">GET /api/hardware_profiles</a>
        </li>
        <li>
        <a href="#h3_2_2">GET /api/hardware profiles/:id</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3_3">3.3 Images</a>
        <ul>
        <li>
        <a href="#h3_3_1">GET /api/images</a>
        </li>
        <li>
        <a href="#h3_3_2">GET /api/images/:id</a>
        </li>
        <li>
        <a href="#h3_3_3">POST /api/images</a>
        </li>
        <li>
        <a href="#h3_3_4">DELETE /api/images/:id</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3_4">3.4 Instance States</a>
        <ul>
        <li>
        <a href="#h3_4_1">GET /api/instance_states</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3_5">3.5 Instances</a>
        <ul>
        <li>
        <a href="#h3_5_1">GET /api/instances</a>
        </li>
        <li>
        <a href="#h3_5_2">GET /api/instances/:id</a>
        </li>
        <li>
        <a href="#h3_5_3">POST /api/instances/:id/:action</a>
        </li>
        <li>
        <a href="#h3_5_4">POST /api/instances</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3_6">3.6 Keys</a>
        <ul>
        <li>
        <a href="#h3_6_1">GET /api/keys</a>
        </li>
        <li>
        <a href="#h3_6_2">GET /api/keys/:id</a>
        </li>
        <li>
        <a href="#h3_6_3">POST /api/keys</a>
        </li>
        <li>
        <a href="#h3_6_4">DELETE /api/keys/:id</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3_7">3.7 Firewalls</a>
        <ul>
        <li>
        <a href="#h3_7_1">GET /api/firewalls</a>
        </li>
        <li>
        <a href="#h3_7_2">GET /api/firewalls/:id</a>
        </li>
        <li>
        <a href="#h3_7_3">POST /api/firewalls</a>
        </li>
        <li>
        <a href="#h3_7_4">DELETE /api/firewalls/:id</a>
        </li>
        <li>
        <a href="#h3_7_5">POST /api/firewalls/:id/rules</a>
        </li>
        <li>
        <a href="#h3_7_6">DELETE /api/firewalls/:id/:rule_id</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3_8">3.8 Addresses</a>
        <ul>
        <li>
        <a href="#h3_8_1">GET /api/addresses</a>
        </li>
        <li>
        <a href="#h3_8_2">GET /api/addresses/:id</a>
        </li>
        <li>
        <a href="#h3_8_3">POST /api/addresses</a>
        </li>
        <li>
        <a href="#h3_8_4">DELETE /api/addresses/:id</a>
        </li>
        <li>
        <a href="#h3_8_5">POST /api/addresses/:id/associate</a>
        </li>
        <li>
        <a href="#h3_8_6">POST /api/addresses/:id/disassociate</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h3_9">3.9 Load Balancers</a>
        <ul>
        <li>
        <a href="#h3_9_1">GET /api/load_balancers</a>
        </li>
        <li>
        <a href="#h3_9_2">GET /api/load_balancers/:id</a>
        </li>
        <li>
        <a href="#h3_9_3">POST /api/load_balancers</a>
        </li>
        <li>
        <a href="#h3_9_4">DELETE /api/load_balancers/:id</a>
        </li>
        <li>
        <a href="#h3_9_5">POST /api/load_balancers/:id/register</a>
        </li>
        <li>
        <a href="#h3_9_6">POST /api/load_balancers/:id/unregister</a>
        </li>
        </ul>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h4">4. Storage Resources</a>
        <ul>
        <li>
        <a href="#h4_1">4.1 Storage Volumes</a>
        <ul>
        <li>
        <a href="#h4_1_1">GET /api/storage_volumes</a>
        </li>
        <li>
        <a href="#h4_1_2">GET /api/storage_volumes/:id</a>
        </li>
        <li>
        <a href="#h4_1_3">POST /api/storage_volumes</a>
        </li>
        <li>
        <a href="#h4_1_4">DELETE /api/storage_volumes/:id</a>
        </li>
        <li>
        <a href="#h4_1_5">POST /api/storage_volumes/:id/attach</a>
        </li>
        <li>
        <a href="#h4_1_6">POST /api/storage_volumes/:id/detach</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h4_2">4.2 Storage Snapshots</a>
        <ul>
        <li>
        <a href="#h4_2_1">GET /api/storage_snapshots</a>
        </li>
        <li>
        <a href="#h4_2_2">GET /api/storage_snapshots/:id</a>
        </li>
        <li>
        <a href="#h4_2_3">POST /api/storage_snapshots</a>
        </li>
        <li>
        <a href="#h4_2_4">DELETE /api/storage_snapshots/:id</a>
        </li>
        </ul>
        </li>
        <li>
        <a href="#h4_3">4.3 Blob Storage</a>
        <ul>
        <li>
        <a href="#h4_3_1">GET /api/buckets</a>
        </li>
        <li>
        <a href="#h4_3_2">GET /api/buckets/:id</a>
        </li>
        <li>
        <a href="#h4_3_3">POST /api/buckets</a>
        </li>
        <li>
        <a href="#h4_3_4">DELETE /api/buckets/:id</a>
        </li>
        <li>
        <a href="#h4_3_5">GET /api/buckets/:bucket_id/:blob_id</a>
        </li>
        <li>
        <a href="#h4_3_6">GET /api/buckets/:bucket_id/:blob_id/content</a>
        </li>
        <li>
        <a href="#h4_3_7">PUT /api/buckets/:bucket_id/:blob_id</a>
        </li>
        <li>
        <a href="#h4_3_8">POST /api/buckets/:bucket_id</a>
        </li>
        <li>
        <a href="#h4_3_9">DELETE /api/buckets/:bucket_id/:blob_id</a>
        </li>
        <li>
        <a href="#h4_3_10">HEAD /api/buckets/:bucket_id/:blob_id</a>
        </li>
        <li>
        <a href="#h4_3_11">POST /api/buckets/:bucket_id/:blob_id</a>
        </li>
        </ul></li></ul></li></ul></p>
        
        <hr />
        
        <h2 id="h1">1. Introduction</h2>
        
        <p>Apache Deltacloud is a REST-based (HATEOAS) cloud abstraction API, that enables
        management of resources in different IaaS clouds using a single API. A series of
         back-end drivers 'speak' each cloud provider's native API and the Deltacloud Core
         Framework provides the basis for implementing drivers as needed for other/new IaaS
        cloud providers. Apache Deltacloud currently supports many back-end cloud providers,
         as listed in <a href="./drivers.html">Drivers</a>.</p>
        
        <p>The Apache Deltacloud project empowers its users in avoiding lockin to any single
        cloud provider. Deltacloud provides an API abstraction that can be implemented as a
         wrapper around a large number of clouds, freeing users of cloud from dealing with the
        particulars of each cloud's API.</p>
        
        <hr />
        
        <h3 id="h1_1">1.1 Collections</h3>
        
        <p>The following terms represent the abstractions used in the Apache Deltacloud API and
        are introduced here to aid the reader. Each represents an entity in the 'back-end'
        provider cloud such as a running virtual server or a server image. It should be
        noted that not all clouds support all of the following entity collections. Only
         the appropriate entity collections are exposed for a given back-end driver
        (e.g. the Microsoft Azure driver currently exposes only the 'Buckets' collection).</p>
        
        <h5>Realms</h5>
        
        <p>A distinct organizational unit within the back-end cloud such as a datacenter.
        A realm may but does not necessarily represent the geographical location of the
        compute resources being accessed.</p>
        
        <h5>Instances</h5>
        
        <p> A realized virtual server, running in a given back-end cloud. These are instantiated
        from server Images.</p>
        
        <h5>Images</h5>
        
        <p>These are templates (virtual machine images) from which Instances are created.
        Each Image defines the root partition and initial storage for the Instance operating system.</p>
        
        <h5>Instance States</h5>
        
        <p>These represent the Instance lifecycle; at any time an Instance will be in one of
         <em>start, pending, running, stopped, shutting_down, finished</em>.</p>
        
        <h5>Keys</h5>
        
        <p>These represent credentials used to access a running Instance. These can be of type
        <em>key</em> (e.g., an <em>RSA</em> key), or of type <em>password</em> (i.e., with <em>username</em> and
        <em>password</em> attributes).</p>
        
        <h5>Storage_Volume</h5>
        
        <p>This is a virtual storage device that can be attached to an Instance and mounted
        by the OS therein.</p>
        
        <h5>Storage_Snapshot</h5>
        
        <p>These are copies, snapshots of a Storage_Volume at a specified point in time.</p>
        
        <h5>Bucket</h5>
        
        <p>A container for data blobs. The organisational unit of a generic <em>key</em> ==> <em>value</em>
         based data store (such as Rackspace CloudFiles or Amazon S3). Individual data
        items, <em>Blobs</em>, are exposed as a subcollection under a bucket.</p>
        
        <h5>Blob</h5>
        
        <p>A generic binary data item that exists with a specified bucket (an `object' in
         Amazon S3 and Rackspace CloudFiles).</p>
        
        <h5>Address</h5>
        
        <p>Represents an IP addresses. Depending on the back-end cloud provider addresses
        can be 'public' in which case they represent a unique, globally routable IP
        address, or 'private' in which case they represent an address routable only
        within a private network.</p>
        
        <h5>Load Balancer</h5>
        
        <p>Allows distribution of ingress network traffic received by a specified IP address
        to a number of instances.</p>
        
        <h5>Firewalls</h5>
        
        <p>Represent sets of rules that govern the accessibility of a running instance over
        the public Internet</p>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h1_2">1.2 Client Requests</h3>
        
        <p>In keeping with REST, clients make requests through HTTP, with the usual
        meanings assigned to the standard HTTP verbs GET, POST, PUT, and DELETE.</p>
        
        <p>Beyond the generally accepted REST design principles, Apache Deltacloud
        follows the guidelines discussed in the Fedora Project <a href="http://fedoraproject.org/wiki/Cloud_APIs_REST_Style_Guide" title="Fedora Cloud APIs REST Style Guide">Cloud APIs Rest Style Guide</a>.</p>
        
        <p>The URL space of the API is structured into collections of resources
        (entities, objects). The top level entities used in the Deltacloud API are:
        Realms, Images, Instance States, Instances, Keys, Storage Volume,
        Storage Snapshots, Blob Storage.</p>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h1_3">1.3 Authentication</h3>
        
        <p>The Deltacloud API server is stateless, and does not keep any information
        about the current client. In particular, it does not store the credentials for
        the backend cloud it is talking to. Instead, it uses HTTP basic authentication,
        and clients have to send the username/password for the backend cloud on every request.</p>
        
        <p>The specifics of what needs to be sent varies from cloud to cloud; some
        cloud providers employ a username and password for API access, whilst
        others use special-purpose API keys. A list of the credentials that a given
        cloud provider expects for API access is <a href="documentation.html">available here</a></p>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h1_4">1.4 Server responses</h3>
        
        <p>The server can respond to client requests in a variety of formats. The
        appropriate response format is determined by HTTP content negotiation.
        The primary format is XML, which is the basis for this document. Output is
        also available as JSON and, mostly for testing, as HTML. Clients can also
        explicitly request a specific response format by including the
        'format=' request parameter (e.g., http://deltacloudserver.foo/api?format=xml
        or http://deltacloudserver.foo/api?format=json).</p>
        
        <p>In general and especially for the html inteface, list operations such as
        <code>GET /api/realms</code> will only provide a list of the objects of this resource type
        with only brief details; full details can be retrieved by making a request
        <code>GET /api/realms/:id</code> to the URL of the individual realm.</p>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h1_5">1.5 API conventions</h3>
        
        <p>Any XML element that represents an object, such as an instance has an
        href and a id attribute. The href provides the URL at which object-specific
        actions can be performed (e.g., a GET to the URL will give details
        of the object). The id provides an identifier of the object and this is unique
        within its collection (i.e., unique id for each Instance, Image, Realm etc).</p>
        
        <p>Generally, objects also have a human-readable name; the name is provided in a
        <code>&lt;name/&gt;</code> child element of the object’s container tag.</p>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h1_6">1.6 API stability and evolution</h3>
        
        <p>Future changes to the API will be made in a manner that allows old clients
        to work against newer versions of the the API server.</p>
        
        <p>The stability guarantees given by the Apache Deltacloud API imply that the
        following changes may happen in newer versions of the API:</p>
        
        <ul>
        <li>adding new collections, or supporting new operations on existing collections</li>
        <li>adding optional parameters to existing operations</li>
        <li>adding additional attributes and elements to the XML/JSON responses</li>
        </ul>
        
        
        <p>On the other hand, these changes would violate API stability and will therefore
        not be made:</p>
        
        <ul>
        <li>removing an operation on a collection</li>
        <li>making an optional parameter for an operation mandatory</li>
        <li>removing attributes or elements from XML responses</li>
        </ul>
        
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h1_7">1.7 Online documentation</h3>
        
        <p>Automatically generated documentation can be accessed on every server running
        the Deltacloud Core API service through the URL <code>http://localhost:3001/api/docs/</code>.
        The documentation is both available in HTML and XML, though the XML format is not
        part of this specification, and may change in an incompatible way.</p>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h2 id="h2">2. The API entry point</h2>
        
        <p>Any part of the official API can be reached through the main entry point,
        by default http://localhost:3001/api. The entry point list the resources
        the server knows about for the current cloud provider; for the Amazon EC2 driver for example, these are:</p>
        
        <ul>
        <li>Instances</li>
        <li>Instance states</li>
        <li>Images</li>
        <li>Realms</li>
        <li>Hardware profiles</li>
        <li>Keys</li>
        <li>Buckets</li>
        <li>Storage volumes</li>
        <li>Storage snapshots</li>
        <li>Load Balancers</li>
        <li>Addresses</li>
        <li>Firewalls</li>
        </ul>
        
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 1439&#x000A;&#x000A;&lt;api driver='ec2' version='0.3.0'&gt;&#x000A;  &lt;link href='http://localhost:3001/api/instance_states' rel='instance_states'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/drivers' rel='drivers'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/addresses' rel='addresses'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/hardware_profiles' rel='hardware_profiles'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/firewalls' rel='firewalls'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/storage_volumes' rel='storage_volumes'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/images' rel='images'&gt;&#x000A;    &lt;feature name='owner_id'&gt;&#x000A;    &lt;/feature&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/realms' rel='realms'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/buckets' rel='buckets'&gt;&#x000A;    &lt;feature name='bucket_location'&gt;&#x000A;    &lt;/feature&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/instances' rel='instances'&gt;&#x000A;    &lt;feature name='user_data'&gt;&#x000A;    &lt;/feature&gt;&#x000A;    &lt;feature name='authentication_key'&gt;&#x000A;    &lt;/feature&gt;&#x000A;    &lt;feature name='firewalls'&gt;&#x000A;    &lt;/feature&gt;&#x000A;    &lt;feature name='instance_count'&gt;&#x000A;    &lt;/feature&gt;&#x000A;    &lt;feature name='attach_snapshot'&gt;&#x000A;    &lt;/feature&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/storage_snapshots' rel='storage_snapshots'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/keys' rel='keys'&gt;&#x000A;  &lt;/link&gt;&#x000A;  &lt;link href='http://localhost:3001/api/load_balancers' rel='load_balancers'&gt;&#x000A;  &lt;/link&gt;&#x000A;&lt;/api&gt;&#x000A;</code></pre>
        
        <p>Specific implementations for the Apache Deltacloud API may not support all resource
        types defined by this API. For example, a Deltacloud instance pointing at a storage-only
        service will not expose compute resources like instances and hardware profiles.</p>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h2_1">2.1 Features</h3>
        
        <p>The Apache Deltacloud API defines the standard behavior and semantics
        for each of the resource types as a baseline for any API implementation; it
        is often desirable to enhance standard API behavior with specific features.
        The API also defines all the features that can be supported by an API
        implementation - each of them has a fixed, predefined meaning. As an
        example, the feature user-name indicates that a user-specified name can be
        assigned to an instance when it is created. Features are advertised in the
        top-level entry point as illustrated below:</p>
        
        <pre><code>&lt;api driver='mock' version='0.3.0'&gt;&#x000A;  ...&#x000A;  &lt;link href='http://localhost:3001/api/instances' rel='instances'&gt;&#x000A;    &lt;feature name='hardware_profiles'&gt;&lt;/feature&gt;&#x000A;    &lt;feature name='user_name'&gt;&lt;/feature&gt;&#x000A;    &lt;feature name='authentication_key'&gt;&lt;/feature&gt;&#x000A;  &lt;/link&gt;&#x000A;  ...&#x000A;&lt;/api&gt;&#x000A;</code></pre>
        
        <p>The following describes the features available to each collection in
        the Deltacloud API together with a brief description:</p>
        
        <pre><code>Feature                 Collection   Operation             Description&#x000A;-------                 ----------   ---------             -----------&#x000A;owner_id                Images       GET /api/images       Allows filtering of the&#x000A;                                                           image list by owner_id&#x000A;--                      --           --                    --&#x000A;user_name               Instances    POST /api/instances   Accept a user-defined name&#x000A;                                                           on instance creation&#x000A;--                      --           --                    --&#x000A;user_data               Instances    POST /api/instances   Provide user-defined data&#x000A;                                                           that is accessible by the&#x000A;                                                           running instance&#x000A;--                      --           --                    --&#x000A;user_iso                Instances    POST /api/instances   Provide a base64 encoded&#x000A;                                                           gzipped ISO file accessible&#x000A;                                                           as CD-ROM drive by the&#x000A;                                                           running instnace&#x000A;--                      --           --                    --&#x000A;user_files              Instances    POST /api/instances   Accept files that will be&#x000A;                                                           placed into the launched&#x000A;                                                           instance&#x000A;--                      --           --                    --&#x000A;firewalls               Instances    POST /api/instances   Put the instance into one&#x000A;                                                           or more firewalls on launch&#x000A;--                      --           --                    --&#x000A;authentication_key      Instances    POST /api/instances   Provide the authentication&#x000A;                                                           key to be used for&#x000A;                                                           accessing the instance&#x000A;--                      --           --                    --&#x000A;authentication_password Instances    POST /api/instances   Provide the password to be&#x000A;                                                           used to access the running&#x000A;                                                           instance&#x000A;--                      --           --                    --&#x000A;instance_count          Instances    POST /api/instances   Specify the number of&#x000A;                                                           instances to launch in&#x000A;                                                           one operation&#x000A;--                      --           --                    --&#x000A;attach_snapshot         Instances    POST /api/instances   Attach a storage_snapshot&#x000A;                                                           to an instance as a&#x000A;                                                           storage_volume&#x000A;--                      --           --                    --&#x000A;sandboxing              Instances    POST /api/instances   Launch a instance from&#x000A;                                                           a sandbox image&#x000A;                                                           (Gogrid specific)&#x000A;--                      --           --                    --&#x000A;bucket_location         Buckets      POST /api/buckets     Specify a location that&#x000A;                                                           the bucket should be&#x000A;                                                           created in (e.g.&#x000A;                                                           specific cloud-provider&#x000A;                                                           datacenter)&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h2 id="h3">3. Compute Resources</h2>
        
        <p>The compute resources are <strong><em>instances, instance states, images, realms, hardware profiles,
        firewalls, load balancers, addresses</em></strong> and <strong><em>keys</em></strong>.</p>
        
        <h3 id="h3_1">3.1 Realms</h3>
        
        <p>A <strong><em>realm</em></strong> represents a boundary containing resources, such as a data
        center. The exact definition of a <strong><em>realm</em></strong> is left to the cloud provider.
        In some cases, a <strong><em>realm</em></strong> may represent different datacenters, different continents,
        or different pools of resources within a single datacenter. A cloud provider may
        insist that resources must all exist within a single <strong><em>realm</em></strong> in order to cooperate.
        For instance, storage volumes may only be allowed to be mounted to instances within
        the same <strong><em>realm</em></strong>. Generally speaking, going from one <strong><em>realm</em></strong> to another within the same
        cloud may change many aspects of the cloud, such as SLA’s, pricing terms, etc.</p>
        
        <h4 id="h3_1_1"><code>GET /api/realms</code></h4>
        
        <p>List all realms. Can be filtered by adding a request parameter <strong><em>architecture</em></strong>
        to the realms that support a specific <strong><em>architecture</em></strong> such as <strong><em>i386</em></strong>. The example
        below shows the retrieval of all <strong><em>realms</em></strong> for the AWS EC2 driver, which correspond
        to EC2 "availability zones":</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/realms?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 639&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;realms&gt;&#x000A;  &lt;realm href='http://localhost:3001/api/realms/us-east-1a' id='us-east-1a'&gt;&#x000A;    &lt;name&gt;us-east-1a&lt;/name&gt;&#x000A;    &lt;state&gt;available&lt;/state&gt;&#x000A;  &lt;/realm&gt;&#x000A;  &lt;realm href='http://localhost:3001/api/realms/us-east-1b' id='us-east-1b'&gt;&#x000A;    &lt;name&gt;us-east-1b&lt;/name&gt;&#x000A;    &lt;state&gt;available&lt;/state&gt;&#x000A;  &lt;/realm&gt;&#x000A;  &lt;realm href='http://localhost:3001/api/realms/us-east-1c' id='us-east-1c'&gt;&#x000A;    &lt;name&gt;us-east-1c&lt;/name&gt;&#x000A;    &lt;state&gt;available&lt;/state&gt;&#x000A;  &lt;/realm&gt;&#x000A;  &lt;realm href='http://localhost:3001/api/realms/us-east-1d' id='us-east-1d'&gt;&#x000A;    &lt;name&gt;us-east-1d&lt;/name&gt;&#x000A;    &lt;state&gt;available&lt;/state&gt;&#x000A;  &lt;/realm&gt;&#x000A;&lt;/realms&gt;&#x000A;</code></pre>
        
        <h4 id="h3_1_2"><code>GET /api/realms/:id</code></h4>
        
        <p>Provide the details of a <strong><em>realm</em></strong>. Currently, these are a <strong><em>name</em></strong>, a  <strong><em>state</em></strong> and a
         <em><strong>limit</strong> applicable to the current requester. The </em><strong>name</strong><em> is an arbitrary label
        with no specific meaning in the API. The </em><strong>state</strong><em> can be either </em><strong>AVAILABLE</strong><em>
         or </em><strong>UNAVAILABLE</strong><em>. The example below shows the </em><strong>realm</strong><em> for the Rackspace driver.
        Since Rackspace does not currently have a notion of </em><strong>realms</strong><em> the Deltacloud
        Rackspace driver provides a single </em><strong>realm</strong>* called 'US', signifying that all
        compute resources for that cloud provider are hosted in the United States:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/realms/us?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 182&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;realm href='http://localhost:3001/api/realms/us' id='us'&gt;&#x000A;    &lt;name&gt;United States&lt;/name&gt;&#x000A;    &lt;state&gt;AVAILABLE&lt;/state&gt;&#x000A;    &lt;limit&gt;&lt;/limit&gt;&#x000A;&lt;/realm&gt;&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h3_2">3.2 Hardware Profiles</h3>
        
        <p>A <strong><em>hardware profile</em></strong> describes the sizing of a virtual machine in a cloud and
        prescribes details such as how many virtual CPUs, how much memory or
        how much local storage an instance might have. The attributes of a <strong><em>hardware profile</em></strong>
        consist of a human-readable <strong><em>name</em></strong> and a list of <strong><em><property /></em></strong> elements.
        Each property defines possible values along a sizing dimension.</p>
        
        <p>Since clouds differ sharply in how virtual machine sizing is represented
        and influenced, hardware profiles provide a generic mechanism to express sizing
        constraints. For each dimension (amount of memory etc.), the hardware
        profile can express one of the following:</p>
        
        <ol>
        <li>Size is <strong>fixed</strong> in this dimension, e.g. instances all have 2GB of memory, <em>or</em></li>
        <li>Size can be varied freely within some <strong>range</strong>, e.g. instances can have
        from 1GB to 4GB of memory, <em>or</em></li>
        <li>Size can be chosen from a predefined set of values, an <strong>enumeration</strong>,
        e.g., instances can have 512 MB, 1 GB or 4GB of memory.</li>
        </ol>
        
        
        <p>When creating a new <strong><em>instance</em></strong>, a client must specify the <strong><em>hardware profile</em></strong>
        on which the <strong><em>instance</em></strong> is based.</p>
        
        <p>In addition to the sizing constraints, a hardware profile may also indicate the
        parameters (if any) that can be specified by a client in <strong><em>instance</em></strong> operations.
        These user-defined, variable dimensions are denoted by a <em>&lt;param></em> XML tag within
        the given property. For instance, the following extract shows the <em>memory</em> dimension
        for a hardware profile that can be specified in the HTTP POST <em>create</em> operation of the
        <strong><em>instances</em></strong> collection (i.e., creating a new instance). The given parameter must be
        specified using the name <em>hwp_memory</em>, its default value is <em>10240</em> but the client may
        specify a value in the range <em>7680</em> upto <em>15360</em>:</p>
        
        <pre><code>...&#x000A;&lt;property kind='range' name='memory' unit='MB' value='10240'&gt;&#x000A;    &lt;param href='http://localhost:3003/api/instances' method='post' name='hwp_memory' operation='create' /&gt;&#x000A;    &lt;range first='7680.0' last='15360' /&gt;&#x000A;&lt;/property&gt;&#x000A;...&#x000A;</code></pre>
        
        <h4 id="h3_2_1"><code>GET /api/hardware_profiles</code></h4>
        
        <p>Produce a list if all <strong><em>hardware profiles</em></strong> availaible with this cloud. The example
        below lists the hardware profiles available in the Amazon EC2 cloud. As EC2 provides
        a set of pre-defined <strong><em>hardware profiles</em></strong>, the properties of each dimension
        (memory,cpu etc) are of type <em>fixed</em>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/hardware_profiles?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 3896&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;hardware_profiles&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/t1.micro' id='t1.micro'&gt;&#x000A;    &lt;name&gt;t1.micro&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='1' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='645.12' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='i386' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='160' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/m1.small' id='m1.small'&gt;&#x000A;    &lt;name&gt;m1.small&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='1' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='1740.8' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='i386' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='160' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/m1.large' id='m1.large'&gt;&#x000A;    &lt;name&gt;m1.large&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='4' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='7680.0' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='x86_64' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='850' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/m1.xlarge' id='m1.xlarge'&gt;&#x000A;    &lt;name&gt;m1.xlarge&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='8' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='15360' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='x86_64' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='1690' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/c1.medium' id='c1.medium'&gt;&#x000A;    &lt;name&gt;c1.medium&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='5' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='1740.8' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='i386' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='350' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/c1.xlarge' id='c1.xlarge'&gt;&#x000A;    &lt;name&gt;c1.xlarge&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='20' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='7168' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='x86_64' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='1690' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/m2.xlarge' id='m2.xlarge'&gt;&#x000A;    &lt;name&gt;m2.xlarge&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='6.5' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='17510.4' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='x86_64' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='420' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/m2.2xlarge' id='m2.2xlarge'&gt;&#x000A;    &lt;name&gt;m2.2xlarge&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='13' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='35020.8' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='x86_64' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='850' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/m2.4xlarge' id='m2.4xlarge'&gt;&#x000A;    &lt;name&gt;m2.4xlarge&lt;/name&gt;&#x000A;    &lt;property kind='fixed' name='cpu' unit='count' value='26' /&gt;&#x000A;    &lt;property kind='fixed' name='memory' unit='MB' value='70041.6' /&gt;&#x000A;    &lt;property kind='fixed' name='architecture' unit='label' value='x86_64' /&gt;&#x000A;    &lt;property kind='fixed' name='storage' unit='GB' value='1690' /&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;&lt;/hardware_profiles&gt;&#x000A;</code></pre>
        
        <h4 id="h3_2_2"><code>GET /api/hardware profiles/:id</code></h4>
        
        <p>This call retrieves the details of a specific <strong><em>hardware profile</em></strong>.
        The example below shows a request for the <em>m1-large</em> profile of the Deltacloud <em>mock</em> driver.
         This <strong><em>hardware profile</em></strong> demonstrates the three different types of parameters (i.e.,
         <em>fixed</em>, <em>range</em>, <em>enum</em>). The example shows that <strong><em>instances</em></strong> launched with this
         <strong><em>hardware profile</em></strong> will have exactly <em>2</em> virtual CPUs, memory in the range <em>7.5</em> to
        <em>15GB</em> and local storage that can either be 850MB or 1GB. The default value for
        each dimension is indicated by the value attribute on the property element:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/hardware_profiles/m1-large?format=xml HTTP/1.1&#x000A;Authorization: Basic bW9ja3VzZXI6bW9ja3Bhc3N3b3Jk&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3003&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 808&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;hardware_profile href='http://localhost:3003/api/hardware_profiles/m1-large' id='m1-large'&gt;&#x000A;  &lt;name&gt;m1-large&lt;/name&gt;&#x000A;  &lt;property kind='fixed' name='cpu' unit='count' value='2' /&gt;&#x000A;  &lt;property kind='range' name='memory' unit='MB' value='10240'&gt;&#x000A;    &lt;param href='http://localhost:3003/api/instances' method='post' name='hwp_memory' operation='create' /&gt;&#x000A;    &lt;range first='7680.0' last='15360' /&gt;&#x000A;  &lt;/property&gt;&#x000A;  &lt;property kind='enum' name='storage' unit='GB' value='850'&gt;&#x000A;    &lt;param href='http://localhost:3003/api/instances' method='post' name='hwp_storage' operation='create' /&gt;&#x000A;    &lt;enum&gt;&#x000A;      &lt;entry value='850' /&gt;&#x000A;      &lt;entry value='1024' /&gt;&#x000A;    &lt;/enum&gt;&#x000A;  &lt;/property&gt;&#x000A;  &lt;property kind='fixed' name='architecture' unit='label' value='x86_64' /&gt;&#x000A;&lt;/hardware_profile&gt;&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h3_3">3.3 Images</h3>
        
        <p><strong><em>Images</em></strong> are used to launch <strong><em>instances</em></strong>. Each <strong><em>image</em></strong> represents
        a virtual machine image in the back-end cloud, containing the root
        partition and initial storage for an instance operating system.</p>
        
        <p>An <strong><em>image</em></strong> has human-readable <em>name</em> and <em>description</em>, an <em>owner_id</em>
        that identifies the user account to which the <strong><em>image</em></strong> belongs, as well as
        an <em>architecture</em> and a <em>state</em>. The <em>architecture</em> attribute refers to whether the
        <strong><em>image</em></strong> will create an <strong><em>instance</em></strong> with <em>32</em> or <em>64</em> bit processor; the values
        that the Deltacloud server returns for this attribute are thus <em>i386</em> and <em>x86_64</em> respectively.
        The <em>state</em> attribute is as reported by the cloud provider and so will vary between back-end clouds.
        For example AWS EC2 <strong><em>image</em></strong> state can be one of <em>AVAILABLE</em>, <em>PENDING</em> or <em>FAILED</em>
        whereas Rackspace Cloudservers <strong><em>image</em></strong> state can be one of <em>UNKNOWN</em>, <em>PREPARING</em>,
         <em>ACTIVE</em>, <em>QUEUED</em> or <em>FAILED</em>. Finally, each <strong><em>image</em></strong> also contains an &lt;actions>
        attribute that specifies the URI to which a client may issue a <strong>HTTP POST</strong> for creation of
        an <strong><em>instance</em></strong> from the given <strong><em>image</em></strong>.</p>
        
        <h4 id="h3_3_1"><code>GET /api/images</code></h4>
        
        <p>Return a list of all <strong><em>images</em></strong> available in the back-end cloud. By default this call will
        return <strong>all</strong> images that are available to the given user account. Optionally a client
        may restrict the list of <strong><em>images</em></strong> returned by specifying the <strong>owner_id</strong> or <strong>architecture</strong>
        parameters in the request (<strong>architecture</strong> is one of <em>x86_64</em> for 64-bit processors or <em>i386</em>
        for 32-bit processors). The example below restricts the image list to <strong>64-bit</strong> architecture images
        belonging to <strong>owner_id 023801271342</strong>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/images?owner_id=023801271342&amp;architecture=x86_64&amp;format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 1971&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;images&gt;&#x000A;  &lt;image href='http://localhost:3001/api/images/ami-eea35787' id='ami-eea35787'&gt;&#x000A;    &lt;name&gt;sles-10-sp3-v1.00.x86_64&lt;/name&gt;&#x000A;    &lt;owner_id&gt;013907871322&lt;/owner_id&gt;&#x000A;    &lt;description&gt;SUSE Linux Enterprise Server 10 Service Pack 3 for x86_64 (v1.00)&lt;/description&gt;&#x000A;    &lt;architecture&gt;x86_64&lt;/architecture&gt;&#x000A;    &lt;state&gt;&lt;/state&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances;image_id=ami-eea35787' method='post' rel='create_instance' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;  &lt;/image&gt;&#x000A;  &lt;image href='http://localhost:3001/api/images/ami-6e649707' id='ami-6e649707'&gt;&#x000A;    &lt;name&gt;sles-11-sp1-hvm-v1.00.x86_64&lt;/name&gt;&#x000A;    &lt;owner_id&gt;013907871322&lt;/owner_id&gt;&#x000A;    &lt;description&gt;SUSE Linux Enterprise Server 11 Service Pack 1 for HVM x86_64 (v1.00)&lt;/description&gt;&#x000A;    &lt;architecture&gt;x86_64&lt;/architecture&gt;&#x000A;    &lt;state&gt;&lt;/state&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances;image_id=ami-6e649707' method='post' rel='create_instance' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;  &lt;/image&gt;&#x000A;  &lt;image href='http://localhost:3001/api/images/ami-e4a7558d' id='ami-e4a7558d'&gt;&#x000A;    &lt;name&gt;sles-11-sp1-hvm-v1.01.x86_64&lt;/name&gt;&#x000A;    &lt;owner_id&gt;013907871322&lt;/owner_id&gt;&#x000A;    &lt;description&gt;SUSE Linux Enterprise Server 11 Service Pack 1 for HVM x86_64 (v1.01)&lt;/description&gt;&#x000A;    &lt;architecture&gt;x86_64&lt;/architecture&gt;&#x000A;    &lt;state&gt;&lt;/state&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances;image_id=ami-e4a7558d' method='post' rel='create_instance' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;  &lt;/image&gt;&#x000A;  &lt;image href='http://localhost:3001/api/images/ami-e4a3578d' id='ami-e4a3578d'&gt;&#x000A;    &lt;name&gt;sles-11-sp1-v1.00.x86_64&lt;/name&gt;&#x000A;    &lt;owner_id&gt;013907871322&lt;/owner_id&gt;&#x000A;    &lt;description&gt;SUSE Linux Enterprise Server 11 Service Pack 1 for x86_64 (v1.00)&lt;/description&gt;&#x000A;    &lt;architecture&gt;x86_64&lt;/architecture&gt;&#x000A;    &lt;state&gt;&lt;/state&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances;image_id=ami-e4a3578d' method='post' rel='create_instance' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;  &lt;/image&gt;&#x000A;&lt;/images&gt;&#x000A;</code></pre>
        
        <h4 id="h3_3_2"><code>GET /api/images/:id</code></h4>
        
        <p>Retrieve the description of a specific <strong><em>image</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/images/14?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 433&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;image href='http://localhost:3002/api/images/14' id='14'&gt;&#x000A;  &lt;name&gt;Red Hat Enterprise Linux 5.4&lt;/name&gt;&#x000A;  &lt;owner_id&gt;jsmith&lt;/owner_id&gt;&#x000A;  &lt;description&gt;Red Hat Enterprise Linux 5.4&lt;/description&gt;&#x000A;  &lt;architecture&gt;x86_64&lt;/architecture&gt;&#x000A;  &lt;state&gt;ACTIVE&lt;/state&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances;image_id=14' method='post' rel='create_instance' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;&lt;/image&gt;&#x000A;</code></pre>
        
        <h4 id="h3_3_3"><code>POST /api/images</code></h4>
        
        <p>Create a new <strong><em>image</em></strong> from an existing, running <strong><em>instance</em></strong>. This operation is not
        available in all cloud providers and for some cloud providers this operation is not
        possible for all <strong><em>instances</em></strong>. For example, in the Amazon EC2 cloud, a custom
        <strong><em>image</em></strong> can be created from EBS backed <strong><em>instances</em></strong> but not from <strong><em>root-store</em></strong>
        instances. The Deltacloud API provides a mechanism with which clients can determine whether
        a given <strong><em>instance</em></strong> may be saved as a custom <strong><em>image</em></strong>. For those cases where
        <strong><em>instance</em></strong> 'snapshot' is possible, the <strong><em>instance</em></strong> XML &lt;actions> list will
        contain a <strong>create_image</strong> action that defines the URI for a client to use in creating
        the new image. For example:</p>
        
        <pre><code>...&#x000A;&lt;actions&gt;&#x000A;  &lt;link href='http://localhost:3002/api/instances/20109341/reboot' method='post' rel='reboot' /&gt;&#x000A;  &lt;link href='http://localhost:3002/api/instances/20109341/stop' method='post' rel='stop' /&gt;&#x000A;  &lt;link href='http://localhost:3002/api/instances/20109341/run;id=20109341' method='post' rel='run' /&gt;&#x000A;  &lt;link href='http://localhost:3002/api/images;instance_id=20109341' method='post' rel='create_image' /&gt;&#x000A;&lt;/actions&gt;&#x000A;...&#x000A;</code></pre>
        
        <p>To create a new <strong><em>image</em></strong> the client must specify the <em>instance_id</em> of the running instance.
         Optionally, the client may also provide a <em>name</em> and a <em>description</em>. The parameters are
        specified as multipart/form-data fields in the client POST. The Deltacloud server will
        respond to a successful operation with <strong>HTTP 201 Created</strong> and provide details of the
        newly created <strong><em>image</em></strong>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/images?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;Content-Length: 404&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------ba9acb193034&#x000A;&#x000A;------------------------------ba9acb193034&#x000A;Content-Disposition: form-data; name="instance_id"&#x000A;&#x000A;20109341&#x000A;------------------------------ba9acb193034&#x000A;Content-Disposition: form-data; name="name"&#x000A;&#x000A;customisedserver&#x000A;------------------------------ba9acb193034&#x000A;Content-Disposition: form-data; name="description"&#x000A;&#x000A;jsmith customised web server July 21 2011&#x000A;------------------------------ba9acb193034--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Content-Type: application/xml&#x000A;Content-Length: 427&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;image href='http://localhost:3002/api/images/12346145' id='12346145'&gt;&#x000A;  &lt;name&gt;customisedserver&lt;/name&gt;&#x000A;  &lt;owner_id&gt;mandreou&lt;/owner_id&gt;&#x000A;  &lt;description&gt;customisedserver&lt;/description&gt;&#x000A;  &lt;architecture&gt;x86_64&lt;/architecture&gt;&#x000A;  &lt;state&gt;QUEUED&lt;/state&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances;image_id=12346145' method='post' rel='create_instance' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;&lt;/image&gt;&#x000A;</code></pre>
        
        <h4 id="h3_3_4"><code>DELETE /api/images/:id</code></h4>
        
        <p>Deletes the specified <strong><em>image</em></strong> from the back-end cloud. The Deltacloud server
        will return a <strong>HTTP 204 No Content</strong> after a succesful operation:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/images/12346145?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h3_4">3.4 Instance States</h3>
        
        <p>Each cloud defines a slightly different lifecycle model for <strong><em>instances</em></strong>. In some
        clouds, <strong><em>instances</em></strong> start running immediately after creation, in others, they
        enter a pending state and they need to be explicitly started to become
        running.</p>
        
        <p>These differences between clouds are modelled by expressing the lifecycle
        of an instance as a finite state machine and capturing this in a <strong><em>instance states</em></strong>
        entity. The start state of the automaton is start and its final state is
        finished. The API defines the following states for an <strong><em>instance</em></strong>:</p>
        
        <h5>Instance states and their meanings:</h5>
        
        <pre><code>State             Meaning&#x000A;-----             -------&#x000A;start             Instances are in this state before they are created&#x000A;--&#x000A;pending           Creation of the instance has been requested and is in progress&#x000A;--&#x000A;running           The instance is running&#x000A;--&#x000A;shutting-down     A shutdown has been requested for the instance and is in progress&#x000A;--&#x000A;stopped           The instance is stopped&#x000A;--&#x000A;finished          All resources for this instance have now been freed&#x000A;</code></pre>
        
        <p>The actions (state transitions) possible for an <strong><em>instance</em></strong> are as shown below.
        The precise actions that can be performed on a specific <strong><em>instance</em></strong> are
        expressed as part of the details for that <strong><em>instance</em></strong>.</p>
        
        <h5>Instance actions and their meanings:</h5>
        
        <pre><code>Action            Meaning&#x000A;------            -------&#x000A;start             Start the instance&#x000A;--&#x000A;stop              Stop (and for some providers, Shutdown) the instance&#x000A;--&#x000A;reboot            Reboot the instance&#x000A;--&#x000A;destroy           Stop the instance and completely destroy it&#x000A;</code></pre>
        
        <h4 id="h3_4_1"><code>GET /api/instance_states</code></h4>
        
        <p>This call retrieves the <strong><em>instance_states</em></strong> entity for a back-end cloud. The <strong><em>instance_states</em></strong>
        entity defines the transitions possible between the various states of an <strong><em>instance</em></strong>,
        and these are back-end cloud specific. In effect <strong><em>instance_states</em></strong> defines the finite state
        machine for <strong><em>instances</em></strong> from the given cloud.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/instance_states?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 583&#x000A;&#x000A;&lt;states&gt;&#x000A;  &lt;state name='start'&gt;&#x000A;    &lt;transition action='create' to='pending'&gt;&lt;/transition&gt;&#x000A;  &lt;/state&gt;&#x000A;  &lt;state name='pending'&gt;&#x000A;    &lt;transition auto='true' to='running'&gt;&lt;/transition&gt;&#x000A;  &lt;/state&gt;&#x000A;  &lt;state name='running'&gt;&#x000A;    &lt;transition action='reboot' to='running'&gt;&lt;/transition&gt;&#x000A;    &lt;transition action='stop' to='shutting_down'&gt;&lt;/transition&gt;&#x000A;  &lt;/state&gt;&#x000A;  &lt;state name='shutting_down'&gt;&#x000A;    &lt;transition auto='true' to='stopped'&gt;&lt;/transition&gt;&#x000A;  &lt;/state&gt;&#x000A;  &lt;state name='stopped'&gt;&#x000A;    &lt;transition auto='true' to='finish'&gt;&lt;/transition&gt;&#x000A;  &lt;/state&gt;&#x000A;  &lt;state name='finish'&gt;&#x000A;  &lt;/state&gt;&#x000A;&lt;/states&gt;&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h3_5">3.5 Instances</h3>
        
        <p>An <strong><em>instance</em></strong> represents the focus of all cloud compute activity: a running
        virtual machine. An <strong><em>instance</em></strong> is created from an <strong><em>image</em></strong>, with a specified
        <strong><em>hardware profile</em></strong> and in a given <strong><em>realm</em></strong>. Each <strong><em>instance</em></strong> can have a
        number of other attributes, not all of which are exposed for all back-end cloud
        providers. The full list of possible <strong><em>instance</em></strong> attributes is:</p>
        
        <pre><code>Attribute           Meaning&#x000A;---------           -------&#x000A;owner_id            The id of the cloud provider account that launched the instance&#x000A;--&#x000A;image_id            The id of the image from which the instance was launched&#x000A;--&#x000A;name                A human readable name for the instance given at launch time&#x000A;--&#x000A;realm_id            Realm into which the instance was launced&#x000A;--&#x000A;state               Current state of the instance (e.g., 'running')&#x000A;--&#x000A;actions             Actions that a client may effect on the instance, based on current state.&#x000A;--&#x000A;public_addresses    The globally routable IP address of the instance&#x000A;--&#x000A;private_addresses   The private IP address of the instance, routable within its private network&#x000A;--&#x000A;instance_profile    The specific values of memory, cpu, storage&#x000A;--&#x000A;launch_time         Timestamp at which the instance was launched&#x000A;--&#x000A;keyname             Name of authentication Key, if this method is used for authentication (e.g., EC2)&#x000A;--&#x000A;username            The username for authentication when connecting to the instance&#x000A;--&#x000A;password            The password used together with username above.&#x000A;--&#x000A;firewalls           The firewalls that this instance was launched into (EC2 specific)&#x000A;--&#x000A;</code></pre>
        
        <h4 id="h3_5_1"><code>GET /api/instances</code></h4>
        
        <p>Produce a listing of all current <strong><em>Instances</em></strong> in the given cloud (belonging to
        the specified account). The example shown below displays <strong><em>instances</em></strong> in the Amazon EC2 cloud:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/instances?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Client response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 2790&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;instances&gt;&#x000A;  &lt;instance href='http://localhost:3001/api/instances/i-1fbc627e' id='i-1fbc627e'&gt;&#x000A;    &lt;name&gt;ami-f51aff9c&lt;/name&gt;&#x000A;    &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;    &lt;image href='http://localhost:3001/api/images/ami-f51aff9c' id='ami-f51aff9c'&gt;&lt;/image&gt;&#x000A;    &lt;realm href='http://localhost:3001/api/realms/us-east-1c' id='us-east-1c'&gt;&lt;/realm&gt;&#x000A;    &lt;state&gt;RUNNING&lt;/state&gt;&#x000A;    &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/c1.medium' id='c1.medium'&gt;&#x000A;    &lt;/hardware_profile&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances/i-1fbc627e/reboot' method='post' rel='reboot' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances/i-1fbc627e/stop' method='post' rel='stop' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances/i-1fbc627e/run;id=i-1fbc627e' method='post' rel='run' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;    &lt;launch_time&gt;2011-07-22T11:29:48.000Z&lt;/launch_time&gt;&#x000A;    &lt;public_addresses&gt;&lt;address&gt;ec2-50-16-183-107.compute-1.amazonaws.com&lt;/address&gt;&lt;/public_addresses&gt;&#x000A;    &lt;private_addresses&gt;&lt;address&gt;domU-12-31-39-0F-79-D4.compute-1.internal&lt;/address&gt;&lt;/private_addresses&gt;&#x000A;    &lt;firewalls&gt;&#x000A;      &lt;firewall href='http://localhost:3001/api/firewalls/default' id='default'&gt;&lt;/firewall&gt;&#x000A;    &lt;/firewalls&gt;&#x000A;    &lt;authentication type='key'&gt;&#x000A;      &lt;login&gt;&#x000A;        &lt;keyname&gt;eftah&lt;/keyname&gt;&#x000A;      &lt;/login&gt;&#x000A;    &lt;/authentication&gt;&#x000A;  &lt;/instance&gt;&#x000A;  &lt;instance href='http://localhost:3001/api/instances/i-f3ba6492' id='i-f3ba6492'&gt;&#x000A;    &lt;name&gt;ami-2b5fba42&lt;/name&gt;&#x000A;    &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;    &lt;image href='http://localhost:3001/api/images/ami-2b5fba42' id='ami-2b5fba42'&gt;&lt;/image&gt;&#x000A;    &lt;realm href='http://localhost:3001/api/realms/us-east-1d' id='us-east-1d'&gt;&lt;/realm&gt;&#x000A;    &lt;state&gt;RUNNING&lt;/state&gt;&#x000A;    &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/m1.small' id='m1.small'&gt;&#x000A;    &lt;/hardware_profile&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances/i-f3ba6492/reboot' method='post' rel='reboot' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances/i-f3ba6492/stop' method='post' rel='stop' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/instances/i-f3ba6492/run;id=i-f3ba6492' method='post' rel='run' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;    &lt;launch_time&gt;2011-07-22T11:32:25.000Z&lt;/launch_time&gt;&#x000A;    &lt;public_addresses&gt;&lt;address&gt;ec2-184-73-78-87.compute-1.amazonaws.com&lt;/address&gt;&lt;/public_addresses&gt;&#x000A;    &lt;private_addresses&gt;&lt;address&gt;ip-10-196-89-221.ec2.internal&lt;/address&gt;&lt;/private_addresses&gt;&#x000A;    &lt;firewalls&gt;&#x000A;      &lt;firewall href='http://localhost:3001/api/firewalls/default' id='default'&gt;&lt;/firewall&gt;&#x000A;      &lt;firewall href='http://localhost:3001/api/firewalls/test' id='test'&gt;&lt;/firewall&gt;&#x000A;    &lt;/firewalls&gt;&#x000A;    &lt;authentication type='key'&gt;&#x000A;      &lt;login&gt;&#x000A;        &lt;keyname&gt;eftah&lt;/keyname&gt;&#x000A;      &lt;/login&gt;&#x000A;    &lt;/authentication&gt;&#x000A;  &lt;/instance&gt;&#x000A;&lt;/instances&gt;&#x000A;</code></pre>
        
        <h4 id="h3_5_2"><code>GET /api/instances/:id</code></h4>
        
        <p>Get the details for a specific <strong><em>Instance</em></strong>. The example shown below is for an <strong><em>instance</em></strong>
        launched in the Rackspace Cloudservers cloud. As can be seen, the authentication type used is
        <strong>password</strong> but the <em>username</em> and <em>password</em> attributes are blank. This is because Rackspace
        only reports these values once, during instance creation and not for subsequent requests.
        An example of the response from <strong><em>instance</em></strong> creation can be found under the
        <a href="#create_instance">POST /api/instances</a> subsection below, showing how the<em>username</em>/<em>password</em>
        fields are populated.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/instances/20112212?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code>
        <a name="get_instance"> .</a></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 1167&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;instance href='http://localhost:3002/api/instances/20112212' id='20112212'&gt;&#x000A;  &lt;name&gt;myserver&lt;/name&gt;&#x000A;  &lt;owner_id&gt;mandreou&lt;/owner_id&gt;&#x000A;  &lt;image href='http://localhost:3002/api/images/53' id='53'&gt;&lt;/image&gt;&#x000A;  &lt;realm href='http://localhost:3002/api/realms/us' id='us'&gt;&lt;/realm&gt;&#x000A;  &lt;state&gt;RUNNING&lt;/state&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3002/api/hardware_profiles/1' id='1'&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances/20112212/reboot' method='post' rel='reboot' /&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances/20112212/stop' method='post' rel='stop' /&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances/20112212/run;id=20112212' method='post' rel='run' /&gt;&#x000A;    &lt;link href='http://localhost:3002/api/images;instance_id=20112212' method='post' rel='create_image' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;  &lt;public_addresses&gt;&lt;address&gt;50.57.116.72&lt;/address&gt;&lt;/public_addresses&gt;&#x000A;  &lt;private_addresses&gt;&lt;address&gt;10.182.143.64&lt;/address&gt;&lt;/private_addresses&gt;&#x000A;  &lt;authentication type='password'&gt;&#x000A;    &lt;login&gt;&#x000A;      &lt;username&gt;root&lt;/username&gt;&#x000A;      &lt;password&gt;&lt;/password&gt;&#x000A;    &lt;/login&gt;&#x000A;  &lt;/authentication&gt;&#x000A;&lt;/instance&gt;&#x000A;</code></pre>
        
        <h4 id="h3_5_3"><code>POST /api/instances/:id/:action</code></h4>
        
        <p>The valid actions for an <strong><em>instance</em></strong> are specified by the <strong><em>instance_states</em></strong> entity.
        The set of permissible actions that a client may effect on an <strong><em>instance</em></strong> at a given time
        depends on the current <strong><em>instance state</em></strong>. These are as reported by the &lt;actions> attribute
        in the Deltacloud server response to a <a href="#get_instance">GET /api/instances/:id</a> call. The first
        example shown below is to <strong>reboot</strong> a currently running instance, followed by a <strong>stop</strong>.</p>
        
        <p>Note that after invoking the <strong>stop</strong> operation, the <strong><em>instance</em></strong> state may be reported as <strong>RUNNING</strong>
        in the Deltacloud server response. This is because it may take some time for the <strong><em>instance</em></strong> state
         to change in the backend cloud provider (and this will vary between providers). Subsequent requests
         for either the list of <strong><em>instances</em></strong> or a specific <strong><em>instance</em></strong> will confirm that the action was
         effected correctly.</p>
        
        <p>The Deltacloud server also allows a special 'run-on-instance' action for some cloud provider
        <strong><em>instances</em></strong>.This enables a client to perform a command on a running <strong><em>instance</em></strong> over
        <strong>SSH</strong> and the Deltacloud server will return the output of that command to the client.
         Where available, this is reported as the <strong>run</strong> action in the list of <strong><em>instance</em></strong>
        actions. The command to be executed on the running <strong><em>instance</em></strong> is specified by the
        <strong>cmd</strong> parameter, whilst authentication is specified either by the <strong>private_key</strong> parameter
        for cloud providers that expect key based authentication for connecting to <strong><em>instances</em></strong>
        or the <strong>password</strong> parameter for those cloud providers that use a <strong>username/password</strong> for
        authentication. The last examples shown below illustrate the 'run-on-instance' feature for
        an Amazon EC2 <strong><em>instance</em></strong> and a Rackspace Cloudservers <strong><em>instance</em></strong>. The two examples
        differ in how authentication is performed (private RSA Key for EC2 and username/password
        for Rackspace).</p>
        
        <p><code>Example request: (reboot)</code></p>
        
        <pre><code>POST /api/instances/i-f3ba6492/reboot?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 1322&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;instance href='http://localhost:3001/api/instances/i-f3ba6492' id='i-f3ba6492'&gt;&#x000A;  &lt;name&gt;ami-f51aff9c&lt;/name&gt;&#x000A;  &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;  &lt;image href='http://localhost:3001/api/images/ami-f51aff9c' id='ami-f51aff9c'&gt;&lt;/image&gt;&#x000A;  &lt;realm href='http://localhost:3001/api/realms/us-east-1c' id='us-east-1c'&gt;&lt;/realm&gt;&#x000A;  &lt;state&gt;RUNNING&lt;/state&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/c1.medium' id='c1.medium'&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/instances/i-f3ba6492/reboot' method='post' rel='reboot' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/instances/i-f3ba6492/stop' method='post' rel='stop' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/instances/i-f3ba6492/run;id=i-f3ba6492' method='post' rel='run' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;  &lt;launch_time&gt;2011-07-22T11:29:48.000Z&lt;/launch_time&gt;&#x000A;  &lt;public_addresses&gt;&lt;address&gt;ec2-50-16-183-107.compute-1.amazonaws.com&lt;/address&gt;&lt;/public_addresses&gt;&#x000A;  &lt;private_addresses&gt;&lt;address&gt;domU-12-31-39-0F-79-D4.compute-1.internal&lt;/address&gt;&lt;/private_addresses&gt;&#x000A;  &lt;firewalls&gt;  &lt;firewall href='http://localhost:3001/api/firewalls/default' id='default'&gt;&lt;/firewall&gt;&lt;/firewalls&gt;&#x000A;  &lt;authentication type='key'&gt;&#x000A;    &lt;login&gt;&#x000A;      &lt;keyname&gt;eftah&lt;/keyname&gt;&#x000A;    &lt;/login&gt;&#x000A;  &lt;/authentication&gt;&#x000A;&lt;/instance&gt;&#x000A;</code></pre>
        
        <p><code>Example request: (stop)</code></p>
        
        <pre><code>POST /api/instances/20112212/stop?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 1167&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;instance href='http://localhost:3002/api/instances/20112212' id='20112212'&gt;&#x000A;  &lt;name&gt;myserver&lt;/name&gt;&#x000A;  &lt;owner_id&gt;mandreou&lt;/owner_id&gt;&#x000A;  &lt;image href='http://localhost:3002/api/images/53' id='53'&gt;&lt;/image&gt;&#x000A;  &lt;realm href='http://localhost:3002/api/realms/us' id='us'&gt;&lt;/realm&gt;&#x000A;  &lt;state&gt;STOPPED&lt;/state&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3002/api/hardware_profiles/1' id='1'&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances/20112212/reboot' method='post' rel='reboot' /&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances/20112212/stop' method='post' rel='stop' /&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances/20112212/run;id=20112212' method='post' rel='run' /&gt;&#x000A;    &lt;link href='http://localhost:3002/api/images;instance_id=20112212' method='post' rel='create_image' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;  &lt;public_addresses&gt;&lt;address&gt;50.57.116.72&lt;/address&gt;&lt;/public_addresses&gt;&#x000A;  &lt;private_addresses&gt;&lt;address&gt;10.182.143.64&lt;/address&gt;&lt;/private_addresses&gt;&#x000A;  &lt;authentication type='password'&gt;&#x000A;    &lt;login&gt;&#x000A;      &lt;username&gt;root&lt;/username&gt;&#x000A;      &lt;password&gt;&lt;/password&gt;&#x000A;    &lt;/login&gt;&#x000A;  &lt;/authentication&gt;&#x000A;&lt;/instance&gt;&#x000A;</code></pre>
        
        <p><code>Example request (run-on-instance Amazon EC2):</code>
        NOTE: run-on-instance requests to EC2 <strong><em>instances</em></strong> will fail with
        <strong>502 Bad Gateway - Execution Expired</strong> if the <strong><em>firewall</em></strong> in which the <strong><em>instance</em></strong>
        was launched does not grant <strong>SSH</strong> access (tcp, port 22) to the requesting client's
        IP address. This access may be given using the <a href="#firewalls">firewalls</a> collection.</p>
        
        <pre><code>POST /api/instances/i-afde73ce/run?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Content-Length: 1927&#x000A;Content-Type: multipart/form-data; boundary=----------------------------332ed6691ab8&#x000A;&#x000A;------------------------------332ed6691ab8&#x000A;Content-Disposition: form-data; name="cmd"&#x000A;&#x000A;uname -a; ls -l&#x000A;------------------------------332ed6691ab8&#x000A;Content-Disposition: form-data; name="private_key"&#x000A;&#x000A;-----BEGIN RSA PRIVATE KEY-----.BTTEpATBAAKDAQEA4t3R/PgUo3KDDuX4&#x000A;vZZpZuXFkAA/5X2lFRY2/xsQqbPz9utPOsUoPf9Aajy+.vGRJrO2KAJ9U/JTNDzr&#x000A;3NPbG3aHYPSnwsSxkFSG4Q6ukqYlxT9TPF/+wvdxfAtp3nYw3ZGuSX/DOtToWtQ8&#x000A;F/+GvHTHKDQSB+TeEs1Sa/PFwxpspB+RqHbqOTWPsFOHL+9sZGTqd6D4B.R6DBNh&#x000A;9Dabu9BVZrl5BTOKlbAgrKnzsGKvaBST/D2.AB/HB9/GOT36OoBmEr1y9gFwu4Xf&#x000A;aKw+AXVf9y9TKxVD3TE5uB.oDZG8s4gr2e691xHG9YGzBBBbNzfFh94b3Td5JBGS&#x000A;zRDTKYBfOgv+Zu5N+WyeaZ0ab50DwK9BXYB5hsRu5zbAqObbTZkwN9qwBOZHzATX&#x000A;wVTZU+eTz.39OZPqu4fQwrBN13lDbUoZxlqT9g2+haQBB9sTDzQEZ08QKBgQDJyw&#x000A;lBBZqQKBgQDz5E2rL59lNS5pBxDO9r6B9rXtBBTZ5tZUWNFRvyNsxY5nJT03.KDw&#x000A;qo2VP5WDZeOhRWEUY96./pWN3hNFDkT44vDpeXQUh3rBHyD5DWvWxAze9Ds+UTO/&#x000A;esuLwP5vXhfoYp6gV9XG.BEBzSVq8kZ2kZtlbWHTR/SGepTkDgYEA9zwHTDhtKR2&#x000A;KS8/BSFZQ884ZqFkbwT9fTW6s0rgUSBDTUDgYEA9W5HXTOEPGFDnqBhKPLN.xD9D&#x000A;vZZpZuXFkAA/5X2lFRY2/xsQqbPz9utPOsUoPf9Aajy+.vGRJrO2KAJ9U/JTNDzr&#x000A;lBBZqQKBgQDz5E2rL59lNS5pBxDO9r6B9rXtBBTZ5tZUWNFRvyNsxY5nJT03.KDw&#x000A;F/+GvHTHKDQSB+TeEs1Sa/PFwxpspB+RqHbqOTWPsFOHL+9sZGTqd6D4B.R6DBNh&#x000A;wVTZU+eTz.39OZPqu4fQwrBN13lDbUoZxlqT9g2+haQBB9sTDzQEZ08QKBgQDJyw&#x000A;lBBZqQKBgQDz5E2rL59lNS5pBxDO9r6B9rXtBBTZ5tZUWNFRvyNsxY5nJT03.KDw&#x000A;DAAeVWKU1OyDXfN4v6Zn1nNrhSkdrd+XV0nTLExsfg==.-----END RSA PRIVAT&#x000A;E KEY-----&#x000A;------------------------------332ed6691ab8--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Mon, 25 Jul 2011 12:56:02 GMT&#x000A;Content-Length: 497&#x000A;&#x000A;&lt;instance href='http://localhost:3001/api/instances/i-afde73ce' id='i-afde73ce'&gt;&#x000A;  &lt;public_address&gt;&#x000A;    ec2-50-19-59-126.compute-1.amazonaws.com&#x000A;  &lt;/public_address&gt;&#x000A;  &lt;command&gt;&#x000A;    uname -a; ls -l&#x000A;  &lt;/command&gt;&#x000A;  &lt;output&gt;Linux domU-12-31-39-0F-E1-78 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 i686 i386 GNU/Linux&#x000A;  total 140&#x000A;  -rw-r--r-- 1 root root 137263 Mar 26  2008 ec2-ami-tools-1.3-19974.noarch.rpm&#x000A;  -rw-r--r-- 1 root root      0 Mar 26  2008 firstlogin&#x000A;  &lt;/output&gt;&#x000A;&lt;/instance&gt;&#x000A;</code></pre>
        
        <p><code>Example request (run-on-instance Rackspace Cloudservers):</code></p>
        
        <pre><code>POST /api/instances/20117112/run?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;Content-Length: 275&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------9b05ece66f4d&#x000A;------------------------------9b05ece66f4d&#x000A;Content-Disposition: form-data; name="cmd"&#x000A;&#x000A;uname -a; ifconfig; pwd&#x000A;------------------------------9b05ece66f4d&#x000A;Content-Disposition: form-data; name="password"&#x000A;&#x000A;myserverqB2Uwk21I&#x000A;------------------------------9b05ece66f4d--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Mon, 25 Jul 2011 13:02:15 GMT&#x000A;Content-Length: 1781&#x000A;&#x000A;&lt;instance href='http://localhost:3002/api/instances/20117112' id='20117112'&gt;&#x000A;  &lt;public_address&gt;&#x000A;    50.57.117.249&#x000A;  &lt;/public_address&gt;&#x000A;  &lt;command&gt;&#x000A;    uname -a; ifconfig; pwd&#x000A;  &lt;/command&gt;&#x000A;  &lt;output&gt;Linux myserver 2.6.35.4-rscloud #8 SMP Mon Sep 20 15:54:33 UTC 2010 x86_64 x86_64 x86_64 GNU/Linux&#x000A;  eth0      Link encap:Ethernet  HWaddr 40:40:B1:7A:52:7E&#x000A;            inet addr:50.57.117.249  Bcast:50.57.117.255  Mask:255.255.255.0&#x000A;            inet6 addr: fe80::4240:b1ff:fe7a:527e/64 Scope:Link&#x000A;            UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1&#x000A;            RX packets:54 errors:0 dropped:0 overruns:0 frame:0&#x000A;            TX packets:62 errors:0 dropped:0 overruns:0 carrier:0&#x000A;            collisions:0 txqueuelen:1000&#x000A;            RX bytes:5880 (5.7 KiB)  TX bytes:6331 (6.1 KiB)&#x000A;            Interrupt:24&#x000A;&#x000A;  eth1      Link encap:Ethernet  HWaddr 40:40:8E:4B:52:23&#x000A;            inet addr:10.182.131.159  Bcast:10.182.159.255  Mask:255.255.224.0&#x000A;            inet6 addr: fe80::4240:8eff:fe4b:5223/64 Scope:Link&#x000A;            UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1&#x000A;            RX packets:3 errors:0 dropped:0 overruns:0 frame:0&#x000A;            TX packets:12 errors:0 dropped:0 overruns:0 carrier:0&#x000A;            collisions:0 txqueuelen:1000&#x000A;            RX bytes:188 (188.0 b)  TX bytes:720 (720.0 b)&#x000A;            Interrupt:25&#x000A;&#x000A;  lo        Link encap:Local Loopback&#x000A;            inet addr:127.0.0.1  Mask:255.0.0.0&#x000A;            inet6 addr: ::1/128 Scope:Host&#x000A;            UP LOOPBACK RUNNING  MTU:16436  Metric:1&#x000A;            RX packets:0 errors:0 dropped:0 overruns:0 frame:0&#x000A;            TX packets:0 errors:0 dropped:0 overruns:0 carrier:0&#x000A;            collisions:0 txqueuelen:0&#x000A;            RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)&#x000A;&#x000A;  /root&lt;/output&gt;&#x000A;&lt;/instance&gt;&#x000A;</code></pre>
        
        <p><a name="create_instance">.</a></p>
        
        <h4 id="h3_5_4"><code>POST /api/instances</code></h4>
        
        <p>Create a new <strong><em>instance</em></strong>. At a minimum clients must specify the <strong><em>image</em></strong> from
        which the virtual machine <strong><em>instance</em></strong> is to be created. Optionally a client
        may also specify a <strong><em>hardware profile</em></strong> and <strong><em>realm</em></strong> (with default values used
        otherwise). Clients can also provide a <em>name</em> for the new <em>instance</em> though this is not
        supported by all back-end cloud providers. Whether a given feature is available is advertised
        in the response to the Deltacloud server API entry point.
        The details of the new <strong><em>instance</em></strong> are returned in response to this operation.</p>
        
        <p>For creation of an <strong><em>instance</em></strong> in the Amazon EC2 cloud a client can also specify the
        name of the EC2 keypair to be used as well as the firewalls (EC2 security groups) that the
        <strong><em>instance</em></strong> should be launched into. The EC2 keypair is specified with the parameter <em>keyname</em>
        while firewalls are specified sequentially as <em>firewalls1</em> ... <em>firewalls2</em> ... etc. These parameters
        are specified in the first <strong><em>instance</em></strong> creation example below. Note that the values for
        public and private addresses are blank in the server response, as these have not yet been
        assigned by the cloud provider. Subsequent requests for the <strong><em>instance</em></strong> details
        will provide these values.</p>
        
        <p><a name="create_instance_ec2">.</a></p>
        
        <p><code>Client request: (AWS EC2)</code></p>
        
        <pre><code>POST /api/instances?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 676&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------cce0758d1679&#x000A;&#x000A;------------------------------cce0758d1679&#x000A;Content-Disposition: form-data; name="keyname"&#x000A;&#x000A;eftah&#x000A;------------------------------cce0758d1679&#x000A;Content-Disposition: form-data; name="image_id"&#x000A;&#x000A;ami-f51aff9c&#x000A;------------------------------cce0758d1679&#x000A;Content-Disposition: form-data; name="realm_id"&#x000A;&#x000A;us-east-1c&#x000A;------------------------------cce0758d1679&#x000A;Content-Disposition: form-data; name="hwp_id"&#x000A;&#x000A;c1.medium&#x000A;------------------------------cce0758d1679&#x000A;Content-Disposition: form-data; name="firewalls1"&#x000A;&#x000A;default&#x000A;------------------------------cce0758d1679&#x000A;Content-Disposition: form-data; name="firewalls2"&#x000A;&#x000A;test&#x000A;------------------------------cce0758d1679--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Content-Type: application/xml&#x000A;Content-Length: 1183&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;instance href='http://localhost:3001/api/instances/i-cbb861aa' id='i-cbb861aa'&gt;&#x000A;  &lt;name&gt;ami-f51aff9c&lt;/name&gt;&#x000A;  &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;  &lt;image href='http://localhost:3001/api/images/ami-f51aff9c' id='ami-f51aff9c'&gt;&lt;/image&gt;&#x000A;  &lt;realm href='http://localhost:3001/api/realms/us-east-1c' id='us-east-1c'&gt;&lt;/realm&gt;&#x000A;  &lt;state&gt;PENDING&lt;/state&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3001/api/hardware_profiles/c1.medium' id='c1.medium'&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/instances/i-cbb861aa/stop' method='post' rel='stop' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/instances/i-cbb861aa/run;id=i-cbb861aa' method='post' rel='run' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;  &lt;launch_time&gt;2011-07-22T16:09:45.000Z&lt;/launch_time&gt;&#x000A;  &lt;public_addresses&gt;&lt;/public_addresses&gt;&#x000A;  &lt;private_addresses&gt;&lt;/private_addresses&gt;&#x000A;  &lt;firewalls&gt;&#x000A;    &lt;firewall href='http://localhost:3001/api/firewalls/test' id='test'&gt;&lt;/firewall&gt;&#x000A;    &lt;firewall href='http://localhost:3001/api/firewalls/default' id='default'&gt;&lt;/firewall&gt;&#x000A;  &lt;/firewalls&gt;&#x000A;  &lt;authentication type='key'&gt;&#x000A;    &lt;login&gt;&#x000A;      &lt;keyname&gt;eftah&lt;/keyname&gt;&#x000A;    &lt;/login&gt;&#x000A;  &lt;/authentication&gt;&#x000A;&lt;/instance&gt;&#x000A;</code></pre>
        
        <p>The second example given below shows creation of an <strong><em>instance</em></strong> in the Rackspace
        Cloudservers cloud. Here you can see that the client provides the optional <em>name</em>
         parameter and that the created instance uses authentication of type <strong>password</strong>.
        The <em>username</em> and <em>password</em> are returned with the details of the newly created
        <strong><em>instance</em></strong>:</p>
        
        <p><code>Example request: (Rackspace Cloudservers)</code></p>
        
        <pre><code>POST /api/instances?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3002&#x000A;Accept: */*&#x000A;Content-Length: 342&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------7424b11a955d&#x000A;&#x000A;------------------------------7424b11a955d&#x000A;Content-Disposition: form-data; name="image_id"&#x000A;&#x000A;53&#x000A;------------------------------7424b11a955d&#x000A;Content-Disposition: form-data; name="hwp_id"&#x000A;&#x000A;1&#x000A;------------------------------7424b11a955d&#x000A;Content-Disposition: form-data; name="name"&#x000A;&#x000A;myserver&#x000A;------------------------------7424b11a955d--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Content-Type: application/xml&#x000A;Content-Length: 883&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;instance href='http://localhost:3002/api/instances/20112212' id='20112212'&gt;&#x000A;  &lt;name&gt;myserver&lt;/name&gt;&#x000A;  &lt;owner_id&gt;mandreou&lt;/owner_id&gt;&#x000A;  &lt;image href='http://localhost:3002/api/images/53' id='53'&gt;&lt;/image&gt;&#x000A;  &lt;realm href='http://localhost:3002/api/realms/us' id='us'&gt;&lt;/realm&gt;&#x000A;  &lt;state&gt;PENDING&lt;/state&gt;&#x000A;  &lt;hardware_profile href='http://localhost:3002/api/hardware_profiles/1' id='1'&gt;&#x000A;  &lt;/hardware_profile&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3002/api/instances/20112212/run;id=20112212' method='post' rel='run' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;  &lt;public_addresses&gt;&lt;address&gt;50.57.116.72&lt;/address&gt;&lt;/public_addresses&gt;&#x000A;  &lt;private_addresses&gt;&lt;address&gt;10.182.143.64&lt;/address&gt;&lt;/private_addresses&gt;&#x000A;  &lt;authentication type='password'&gt;&#x000A;    &lt;login&gt;&#x000A;      &lt;username&gt;root&lt;/username&gt;&#x000A;      &lt;password&gt;myserver4OvKh7Ak3&lt;/password&gt;&#x000A;    &lt;/login&gt;&#x000A;  &lt;/authentication&gt;&#x000A;&lt;/instance&gt;&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h3_6">3.6 Keys</h3>
        
        <p>A <strong><em>key</em></strong> captures the credentials required to access an <strong><em>Instance</em></strong>. The Deltacloud API supports
        two main types of <strong><em>keys</em></strong>: type <strong>password</strong> which have <em>username</em> and <em>password</em> attributes, or type
        <strong>key</strong> which have <em>fingerprint</em> and <em>pem</em> (private key) attributes (public/private keypair).
        The key type is determined by the back-end cloud provider.</p>
        
        <p>Some cloud providers require that the client specify the credentials to be used for connecting to an
         <strong><em>instance</em></strong> as a parameter to <strong><em>instance</em></strong> creation. An example is the Amazon EC2 cloud which uses
        <strong><em>keys</em></strong> of type <strong>key</strong> and where the identifier of the <strong>key</strong> to be used with a given <strong><em>instance</em></strong>
        is supplied in the <em>keyname</em> parameter to the <a href="#create_instance_ec2">POST /api/instances</a> call.</p>
        
        <p>Other cloud providers report the <strong><em>instance</em></strong> credentials in the response to <strong><em>instance</em></strong>
        creation and make them available for subsequent retrieval. An example is the Gogrid Cloud,
         which uses <strong><em>keys</em></strong> of type  <strong>password</strong> (note: the Rackspace cloud also reports credentials
        during <strong><em>instance</em></strong> creation though it does not provide a mechanism with which to retrieve
        those passwords thereafter).</p>
        
        <h4 id="h3_6_1"><code>GET /api/keys</code></h4>
        
        <p>This gives a listing of all available keys. The example shown below is for <strong><em>keys</em></strong> from the Amazon
        EC2 cloud, which are of type <strong>key</strong>. Note that the XML response does not contain the private key
        attribute. This is because EC2 only provides the private key once, when the key is created (see
        <a href="#key_create">key creation</a> for an example):</p>
        
        <p><a name="get_keys">.</a></p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/keys?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Tue, 26 Jul 2011 08:09:26 GMT&#x000A;Content-Length: 733&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;keys&gt;&#x000A;  &lt;key href='http://localhost:3001/api/keys/deltacloud_jsmith' id='deltacloud_jsmith' type='key'&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/keys/deltacloud_jsmith' method='delete' rel='destroy' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;    &lt;fingerprint&gt;38:93:81:11:83:c2:c7:27:e8:79:17:e2:08:c9:13:99:73:90:8e:cc&lt;/fingerprint&gt;&#x000A;    &lt;state&gt;AVAILABLE&lt;/state&gt;&#x000A;  &lt;/key&gt;&#x000A;  &lt;key href='http://localhost:3001/api/keys/the_key' id='the_key' type='key'&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/keys/the_key' method='delete' rel='destroy' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;    &lt;fingerprint&gt;39:d3:9b:bb:93:92:97:27:e9:7d:b7:e2:09:9d:b3:dd:73:d0:9e:99&lt;/fingerprint&gt;&#x000A;    &lt;state&gt;AVAILABLE&lt;/state&gt;&#x000A;  &lt;/key&gt;&#x000A;&lt;/keys&gt;&#x000A;</code></pre>
        
        <h4 id="h3_6_2"><code>GET /api/keys/:id</code></h4>
        
        <p>Get the XML description for a specific key. The example below shows a key of type <strong>password</strong> from the
        Gogrid cloud:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/keys/72398?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.21.2 (x86_64-apple-darwin10.3.1)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Tue, 26 Jul 2011 11:13:25 GMT&#x000A;Content-Length: 269&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;key href='http://localhost:3001/api/keys/72398' id='72398' type='password'&gt;&#x000A;    &lt;actions&gt;&#x000A;    &lt;/actions&gt;&#x000A;    &lt;username&gt;&lt;![CDATA[26648]]&gt;&lt;/username&gt;&#x000A;    &lt;password&gt;&lt;![CDATA[3woc7UWdJsJEcm8@]]&gt;&lt;/password&gt;&#x000A;    &lt;state&gt;&lt;/state&gt;&#x000A;&lt;/key&gt;&#x000A;</code></pre>
        
        <h4 id="h3_6_3"><code>POST /api/keys</code></h4>
        
        <p>Some back-end cloud providers allow a client to create new credentials for
        accessing Instances. The parameters (key attributes) required by this function will depend on the
         back-end and are specified in the relevant driver. At present only the Amazon EC2 cloud implements a key
        create method and this requires the key <em>name</em> to be specified as a parameter. It should be noted that
        the private key attribute of a newly created key is reported only once, in response to the create
        operation as shown in the example below. The client should save the private key for future use with
         <strong><em>instance</em></strong> authentication. In all subsequent calls, only the fingerprint attribute is displayed
         in the Deltacloud server response, as illustrated by the <a href="#get_keys">GET /api/keys</a> call above.</p>
        
        <p><a name="key_create">.</a></p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/keys?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 153&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------92fbd163f915&#x000A;&#x000A;------------------------------92fbd163f915&#x000A;Content-Disposition: form-data; name="name"&#x000A;&#x000A;jsmith_new_key&#x000A;------------------------------92fbd163f915--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Content-Type: application/xml&#x000A;Date: Tue, 26 Jul 2011 10:58:58 GMT&#x000A;Content-Length: 2062&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;key href='http://localhost:3001/api/keys/jsmith_new_key' id='jsmith_new_key' type='key'&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/keys/jsmith_new_key' method='delete' rel='destroy' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;  &lt;fingerprint&gt;c6:80:5c:0a:b8:66:0d:58:5a:bf:0f:c2:5d:35:d3:c7:49:f3:5a:5f&lt;/fingerprint&gt;&#x000A;  &lt;pem&gt;&#x000A;    &lt;![CDATA[-----BEGIN RSA PRIVATE KEY-----&#x000A;    MIIEpgIBAAKCAQEAsPIzLQEpoLkxd0WESPEWQ4AMn9e0T6jHIMl/a2GUx2TA2Q10n6i5h4VAXXrK&#x000A;    m9fNnPJhw1uRbuL7Oz57QSftGUfz05EaLOsvIEq3OXA0HqnFPF7Dd4yvy07KfgNHe2c26NqIqxgw&#x000A;    GCy6tfd/9iKQIlFCG8I/M6fgEG/vw30GP5EywYLS0J7lYfNHJAVAznjX0LoOWvT0zYajZ7gWJ30/&#x000A;    sQ/IFaKxC3BpT6K2aQP+RgAimALHinFuoT4+07SsrQXEezLemAG/gdbw3+7DL9BGq0CCoY1RxeC7&#x000A;    qNh9BJwHtq9QPYg/RKruiYak/TSoB71/VP67lJv0WEkCRJKEFpz5SQIDAQABAoIBAQChVyZcmdvI&#x000A;    JjS5aVSWYeWIBMD+GmPZ4q428iPR2LcdHHxPLVqyndkVfeXTlrwZX6umuMd1pw+zyRmEypL+NRaW&#x000A;    36mutnbkkEl3K0loASw07V3fjxSx9EDyo1Q1lG3gUpuZtHG7eCGaWWahtxwhZSCBehBKWVLhmefP&#x000A;    dRFs8Zn56LhfxByS/HcmHYddq1ggynFgg1DszYKTiJ0k5Zd/w4gh3GXH02S50cNFumJh9tbZNeDz&#x000A;    yqa6a12N21loZ/VRRL7lEjpf3K2n0DCQ5pp0I9/FiwuwHMWr6qPSsQt9N/XclNiVg7fz+btNsqVY&#x000A;    US1kBkvazoaANmF3VOXT9bmiFnuBAoGBAOkURD2uBe9UUl7xvWON7yS+tBcs1KyYDsTEhsS5dLdk&#x000A;    n73/5vyEVzozdywTR7lQWVQhWWwkK/FJd9Xo/VV5bGXl+MK/JxIQHrEhLzO1OeYEBiw2eKhigyDb&#x000A;    lm7pk/DuBNqgnA9YVnSvRYjpnvgBeb89CHvdhqn52GcbB2ShXurRAoGBAMJYyqNyl8CiIqesigts&#x000A;    tlRk0UmS/LS6I58f7nbcrkgO3ZDsYhXhj9aKSJx56bpWTwoFdl7nTSUwkFgq2ts3g7EPQbYD/5G6&#x000A;    kwpq0tvC23zZTfYvjExNVORh9PJBCrBl1tC/5nqYSrHC7H3Ys/SW3DF+0LPTdOtx5FwL5Utr3lT5&#x000A;    AoGBAM3Y8EvpHaS5O+ZOaY07FTHGmxa8qTelM6XkS4ICqGovnEUZdM8fskncmit6+6VWqQ38RhWT&#x000A;    /Jsk34k0NEkA7BMyf/i/CaqSQgj93co1C+VxOGJj2TwdhOHIDZv2/omSLQdJQYrr4a87/JVmftdZ&#x000A;    tkSHiq6afwwvdEfbPzRIsKOBAoGBAK5EjEAP6z+So1yS/J3N95ipZnmA0hUErBhtu5jdvXFj0w22&#x000A;    ySUxw5bvHLkjIJA0AF/OEhx7b9OfPm+wzdqwZugH9DZQU4TLNjqrGzRv//xtptjQPg/Vb//yToBE&#x000A;    Dl+qkftReEwJ70CCtykJfiQeeofvXRlCzZ6p28kl6Y+9w/mRAoGBANI8AGB1iUDMQDiEfTAuH7jB&#x000A;    nZTZUsfAaysoku3gyVmtcu1Zo7T02b8YW3ypuNu664KO7eNik9q68yKa7oDuLVrVj6Sh2DInoeW9&#x000A;    vbjp2KcyMVEPHzWh86LV9IY5oHjQxlK/PMhQWMEeysi6j2qFqrx2rqRhG6kZUcFHFoHQpmv2&#x000A;    -----END RSA PRIVATE KEY-----]]&gt;&#x000A;  &lt;/pem&gt;&#x000A;  &lt;state&gt;AVAILABLE&lt;/state&gt;&#x000A;&lt;/key&gt;&#x000A;</code></pre>
        
        <h4 id="h3_6_4"><code>DELETE /api/keys/:id</code></h4>
        
        <p>Delete a <strong><em>key</em></strong>, specified by its :id attribute. Note that as with the :create
        operation, this feature is currently only available in the Amazon EC2 driver.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/keys/jsmith_new_key?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Tue, 26 Jul 2011 10:18:38 GMT&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <p><a name="firewalls">.</a></p>
        
        <h3 id="h3_7">3.7 Firewalls</h3>
        
        <p>Firewalls represent sets of rules that govern the accessibility of a running
         <strong><em>instance</em></strong> over the  public Internet. At present only the Amazon EC2 cloud
        supports this collection (Amazon EC2 'Security Groups'). A <strong><em>firewall</em></strong> has
        a <strong>name</strong> and <strong>description</strong>, an <strong>owner_id</strong> and a set of <strong>rules</strong>. An
        <strong><em>instance</em></strong> is 'launched into' a <strong><em>firewall</em></strong> where this is supported,
        by specifying the <strong>firewalls1 ... firewallsN</strong> parameters in the
         <a href="#create_instance_ec2">POST /api/instances</a> operation.</p>
        
        <p>Each <strong><em>firewall rule</em></strong> has a number of attributes describing the access granted
        to clients that want to communicate with the <strong><em>instance</em></strong> over the Internet.
        Each rule has an <strong>allow_protocol</strong> (<em>tcp</em>, <em>udp</em>  or <em>icmp</em>) a <strong>port_from</strong>
        and <strong>port_to</strong> that delimit the port range for access, a <strong>sources</strong> list which
        can contain <strong><em>firewalls</em></strong> (i.e. allow <strong><em>instances</em></strong> in another <strong><em>firewall</em></strong>
        to communicate with <strong><em>instances</em></strong> in the <strong><em>firewall</em></strong> in which this rule exists),
        or a number of IP addresses in CIDR format, or  a mix of both. Finally each rule
        also specifies a <strong>direction</strong>, indicating whether it applies to ingress
        or egress traffic.</p>
        
        <p>As Amazon EC2 has no notion of a <strong><em>firewall rule</em></strong> ID, the Deltacloud server constructs one
        for each rule as the concatenation of its attributes. The format used is:
        owner_id~protocol~from_port~to_port~@sources.</p>
        
        <p>As explained above a source can be of type <strong>address</strong> in which case it defines an
        <em>IP type</em> (ipv4/ipv6), an <em>IP address</em> and <em>routing prefix</em> (CIDR netmask). Sources
        of type <strong>group</strong> have a <em>name</em> that defines the <strong><em>firewall</em></strong> to which access
        is being granted and an <em>owner_id</em> (identifier of the account that created the
        specified firewall).</p>
        
        <p>An example of a rule id is:</p>
        
        <pre><code>393485797142~tcp~22~22~@group,393485797142,default,@address,ipv4,10.1.2.3,24&#x000A;          {owner_id~protocol~from_port~to_port~@sources}&#x000A;</code></pre>
        
        <p>By creating the rule identifier abstraction, the Deltacloud API supports deletion of
        an entire firewall rule as one operation,
        <a href="#delete_firewall_rule">DELETE /api/firewalls/:firewall_id/:rule_id</a>.</p>
        
        <h4 id="h3_7_1"><code>GET /api/firewalls</code></h4>
        
        <p>Retrieve a list of all <strong><em>firewalls</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/firewalls?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Tue, 26 Jul 2011 15:56:04 GMT&#x000A;Content-Length: 1640&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;firewalls&gt;&#x000A;  &lt;firewall href='http://localhost:3001/api/firewalls/default' id='default'&gt;&#x000A;    &lt;name&gt;&lt;![CDATA[default]]&gt;&lt;/name&gt;&#x000A;    &lt;description&gt;&lt;![CDATA[default group]]&gt;&lt;/description&gt;&#x000A;    &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;    &lt;rules&gt;&#x000A;      &lt;rule id='393485797142~tcp~22~22~@address,ipv4,87.228.192.251,32'&gt;&#x000A;        &lt;allow_protocol&gt;tcp&lt;/allow_protocol&gt;&#x000A;        &lt;port_from&gt;22&lt;/port_from&gt;&#x000A;        &lt;port_to&gt;22&lt;/port_to&gt;&#x000A;        &lt;direction&gt;ingress&lt;/direction&gt;&#x000A;        &lt;sources&gt;&#x000A;          &lt;source address='87.228.192.251' family='ipv4' prefix='32' type='address'&gt;&lt;/source&gt;&#x000A;        &lt;/sources&gt;&#x000A;      &lt;/rule&gt;&#x000A;    &lt;/rules&gt;&#x000A;  &lt;/firewall&gt;&#x000A;  &lt;firewall href='http://localhost:3001/api/firewalls/test' id='test'&gt;&#x000A;    &lt;name&gt;&lt;![CDATA[test]]&gt;&lt;/name&gt;&#x000A;    &lt;description&gt;&lt;![CDATA[this is just a test]]&gt;&lt;/description&gt;&#x000A;    &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;    &lt;rules&gt;&#x000A;      &lt;rule id='393485797142~tcp~22~22~@group,393485797142,default,@address,ipv4,10.1.2.3,24'&gt;&#x000A;        &lt;allow_protocol&gt;tcp&lt;/allow_protocol&gt;&#x000A;        &lt;port_from&gt;22&lt;/port_from&gt;&#x000A;        &lt;port_to&gt;22&lt;/port_to&gt;&#x000A;        &lt;direction&gt;ingress&lt;/direction&gt;&#x000A;        &lt;sources&gt;&#x000A;          &lt;source name='default' owner='393485797142' type='group'&gt;&lt;/source&gt;&#x000A;          &lt;source address='10.1.2.3' family='ipv4' prefix='24' type='address'&gt;&lt;/source&gt;&#x000A;        &lt;/sources&gt;&#x000A;      &lt;/rule&gt;&#x000A;    &lt;/rules&gt;&#x000A;  &lt;/firewall&gt;&#x000A;  &lt;firewall href='http://localhost:3001/api/firewalls/new_firewall' id='new_firewall'&gt;&#x000A;    &lt;name&gt;&lt;![CDATA[new_firewall]]&gt;&lt;/name&gt;&#x000A;    &lt;description&gt;&lt;![CDATA[new_one]]&gt;&lt;/description&gt;&#x000A;    &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;    &lt;rules&gt;&#x000A;    &lt;/rules&gt;&#x000A;  &lt;/firewall&gt;&#x000A;&lt;/firewalls&gt;&#x000A;</code></pre>
        
        <h4 id="h3_7_2"><code>GET /api/firewalls/:id</code></h4>
        
        <p>Retrieve details of a single specified <strong><em>firewall</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/firewalls/test?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server reponse:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Wed, 27 Jul 2011 08:20:29 GMT&#x000A;Content-Length: 835&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;firewall href='http://localhost:3001/api/firewalls/test' id='test'&gt;&#x000A;  &lt;name&gt;&lt;![CDATA[test]]&gt;&lt;/name&gt;&#x000A;  &lt;description&gt;&lt;![CDATA[this is just a test]]&gt;&lt;/description&gt;&#x000A;  &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;  &lt;rules&gt;&#x000A;    &lt;rule href='http://localhost:3001/api/firewalls/test/393485797142~tcp~22~22~@group,393485797142,default,@address,ipv4,10.1.2.3,24' id='393485797142~tcp~22~22~@group,393485797142,default,@address,ipv4,10.1.2.3,24'&gt;&#x000A;      &lt;allow_protocol&gt;tcp&lt;/allow_protocol&gt;&#x000A;      &lt;port_from&gt;22&lt;/port_from&gt;&#x000A;      &lt;port_to&gt;22&lt;/port_to&gt;&#x000A;      &lt;direction&gt;ingress&lt;/direction&gt;&#x000A;      &lt;sources&gt;&#x000A;        &lt;source name='default' owner='393485797142' type='group'&gt;&lt;/source&gt;&#x000A;        &lt;source address='10.1.2.3' family='ipv4' prefix='24' type='address'&gt;&lt;/source&gt;&#x000A;      &lt;/sources&gt;&#x000A;    &lt;/rule&gt;&#x000A;  &lt;/rules&gt;&#x000A;&lt;/firewall&gt;&#x000A;</code></pre>
        
        <h4 id="h3_7_3"><code>POST /api/firewalls</code></h4>
        
        <p>Creates a new <strong><em>firewall</em></strong>. Clients must specify the <strong><em>firewall</em></strong> <em>name</em> and <em>description</em> as
        parameters to the request. On succesful completion the Deltacloud server will respond with <strong>HTTP 201
        Created</strong> and return details of the newly created <strong><em>firewall</em></strong>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/firewalls?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 285&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------cdbcabd8ab04&#x000A;&#x000A;------------------------------cdbcabd8ab04&#x000A;Content-Disposition: form-data; name="name"&#x000A;&#x000A;Devel_Group&#x000A;------------------------------cdbcabd8ab04&#x000A;Content-Disposition: form-data; name="description"&#x000A;&#x000A;Access for all development machines&#x000A;------------------------------cdbcabd8ab04--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Content-Type: application/xml&#x000A;Date: Wed, 27 Jul 2011 08:35:43 GMT&#x000A;Content-Length: 296&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;firewall href='http://localhost:3001/api/firewalls/Devel_Group' id='Devel_Group'&gt;&#x000A;  &lt;name&gt;&lt;![CDATA[Devel_Group]]&gt;&lt;/name&gt;&#x000A;  &lt;description&gt;&lt;![CDATA[Access for all development machines]]&gt;&lt;/description&gt;&#x000A;  &lt;owner_id&gt;&lt;/owner_id&gt;&#x000A;  &lt;rules&gt;&#x000A;  &lt;/rules&gt;&#x000A;&lt;/firewall&gt;&#x000A;</code></pre>
        
        <p><a name="delete_firewall_rule"> .</a></p>
        
        <h4 id="h3_7_4"><code>DELETE /api/firewalls/:id</code></h4>
        
        <p>Deletes the specified <strong><em>firewall</em></strong> from the back-end cloud provider. The Deltacloud server will respond
        with <strong>HTTP 204 No Content</strong> after a successful deletion:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/firewalls/test?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Client response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Wed, 27 Jul 2011 09:47:43 GMT&#x000A;</code></pre>
        
        <p>The rules governing the deletion of a <strong><em>firewall</em></strong> are back-end cloud specific.
        Since at present only the Amazon EC2 cloud supports the <strong><em>firewalls</em></strong> collection we describe the
        <strong><em>firewall</em></strong> deletion rules for EC2 here.</p>
        
        <p>It is permitted to delete a <strong><em>firewall</em></strong> that has rules defined within it, with two caveats.
        You cannot delete a  <strong><em>firewall</em></strong> if it is referenced by another <strong><em>firewall</em></strong>; for instance
         <strong>firewall_1</strong> has a rule giving access to <strong>firewall_2</strong>. An attempt to delete
        <strong>firewall_2</strong> will result in the error <strong>InvalidGroup.InUse</strong>, as shown in the example below. The second
        caveat is that you cannot delete a <strong><em>firewall</em></strong> if there are currently any running <strong><em>instances</em></strong> within
        that <strong><em>firewall</em></strong> (i.e. <strong><em>instances</em></strong> that specified the given <strong><em>firewall</em></strong> when they were launched).
        The error message in that case is <strong>InvalidGroup.InUse: There are active instances using security group</strong>.
        In both cases the error message is propagated from the back-end cloud provider to the requesting client:</p>
        
        <p><code>Example request: (error deleting a firewall referenced by another firewall)</code></p>
        
        <pre><code>DELETE /api/firewalls/firewall_2?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 502 Bad Gateway&#x000A;Content-Type: application/xml&#x000A;Content-Length: 626&#x000A;&#x000A;&lt;error status='502' url='/api/firewalls/firewall_2?format=xml'&gt;&#x000A;  &lt;kind&gt;backend_error&lt;/kind&gt;&#x000A;  &lt;backend driver='ec2'&gt;&#x000A;    &lt;code&gt;502&lt;/code&gt;&#x000A;  &lt;/backend&gt;&#x000A;  &lt;message&gt;&lt;![CDATA[InvalidGroup.InUse: Group 393485797142:firewall_2 is used by groups: 393485797142:firewall_1&#x000A;  REQUEST=ec2.us-east-1.amazonaws.com:443/?AWSAccessKeyId=AGG332FWWR5A11F327Q&amp;Action=DeleteSecurityGroup&amp;GroupName=firewall_2&amp;SignatureMethod=HmacSHA256&amp;SignatureVersion=2&amp;Timestamp=2011-07-27T08%3A50%3A50.000Z&amp;Version=2010-08-31&amp;Signature=g613223efwv5WAVhAosmPcrsfHqApAuw\nnwfYnZp0k3U%3D&#x000A;  REQUEST ID=8591fa20-a6ee-4db7-b30f-3022ecc9a9f5]]&gt;&lt;/message&gt;&#x000A;&lt;/error&gt;&#x000A;</code></pre>
        
        <h4 id="h3_7_5"><code>POST /api/firewalls/:id/rules</code></h4>
        
        <p>Create a new <strong><em>firewall rule</em></strong> within a specified <strong><em>firewall</em></strong>. A client must supply the <strong>protocol</strong>
        (one of <em>udp</em>, <em>tcp</em> or <em>icmp</em>), <strong>port_from</strong> and <strong>port_to</strong> as parameters. Ofcourse the client must also
        specify the <strong>sources</strong> to which the given rule is to apply. IP addresses are specified in CIDR format
        sequentially: <em>ip_address1=192.168.10.10/24</em>, <em>ip_address2=10.1.1.1/16</em> ... <em>ip_addressN=...</em>. The IP
        address '0.0.0.0/0' acts as a wildcard to specify <strong>any</strong> IP address.
        Source <strong><em>firewalls</em></strong> are also specified sequentially but the <em>owner_id</em> of the <strong><em>firewall</em></strong> that is to
         be authorized must also be supplied (this is an Amazon EC2 requirement): group1=name1,
        group1owner=1234567890, group2=name2, group2owner=0987654321, ... groupN=nameN, groupNowner=...</p>
        
        <p>The Deltacloud server responds with a <strong>HTTP 201 Created</strong> after a successful operation together with the
        details of the affected <strong><em>firewall</em></strong>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/firewalls/default/rules?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 1005&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------4c9e7fa0a35e&#x000A;&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="protocol"&#x000A;&#x000A;tcp&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="port_from"&#x000A;&#x000A;22&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="port_to"&#x000A;&#x000A;22&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="group1"&#x000A;&#x000A;devel_group&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="group1owner"&#x000A;&#x000A;393485797142&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="group2"&#x000A;&#x000A;outside&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="group2owner"&#x000A;&#x000A;393485797142&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="ip_address1"&#x000A;&#x000A;192.168.1.1/24&#x000A;------------------------------4c9e7fa0a35e&#x000A;Content-Disposition: form-data; name="ip_address2"&#x000A;&#x000A;65.128.31.27/32&#x000A;------------------------------4c9e7fa0a35e--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Content-Type: application/xml&#x000A;Date: Wed, 27 Jul 2011 10:18:51 GMT&#x000A;Content-Length: 1143&#x000A;&#x000A;&lt;firewall href='http://localhost:3001/api/firewalls/default' id='default'&gt;&#x000A;  &lt;name&gt;&lt;![CDATA[default]]&gt;&lt;/name&gt;&#x000A;  &lt;description&gt;&lt;![CDATA[default group]]&gt;&lt;/description&gt;&#x000A;  &lt;owner_id&gt;393485797142&lt;/owner_id&gt;&#x000A;  &lt;rules&gt;&#x000A;    &lt;rule href='http://localhost:3001/api/firewalls/default/393485797142~tcp~22~22~@group,393485797142,devel_group,@group,393485797142,outside,@address,ipv4,192.168.1.1,24,@address,ipv4,65.128.31.27,32' id='393485797142~tcp~22~22~@group,393485797142,devel_group,@group,393485797142,outside,@address,ipv4,192.168.1.1,24,@address,ipv4,65.128.31.27,32'&gt;&#x000A;      &lt;allow_protocol&gt;tcp&lt;/allow_protocol&gt;&#x000A;      &lt;port_from&gt;22&lt;/port_from&gt;&#x000A;      &lt;port_to&gt;22&lt;/port_to&gt;&#x000A;      &lt;direction&gt;ingress&lt;/direction&gt;&#x000A;      &lt;sources&gt;&#x000A;        &lt;source name='devel_group' owner='393485797142' type='group'&gt;&lt;/source&gt;&#x000A;        &lt;source name='outside' owner='393485797142' type='group'&gt;&lt;/source&gt;&#x000A;        &lt;source address='192.168.1.1' family='ipv4' prefix='24' type='address'&gt;&lt;/source&gt;&#x000A;        &lt;source address='65.128.31.27' family='ipv4' prefix='32' type='address'&gt;&lt;/source&gt;&#x000A;      &lt;/sources&gt;&#x000A;    &lt;/rule&gt;&#x000A;  &lt;/rules&gt;&#x000A;&lt;/firewall&gt;&#x000A;</code></pre>
        
        <h4 id="h3_7_6"><code>DELETE /api/firewalls/:id/:rule_id</code></h4>
        
        <p>Delete the specified firewall rule. The Deltacloud server will respond with <strong>HTTP 204 No Content</strong> on
        completion of a successful delete operation:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/firewalls/default/393485797142~tcp~0~0~@group,393485797142,devel_group,@group,393485797142,outside,@address,ipv4,192.168.1.1,24,@address,ipv4,65.128.31.27,32?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Wed, 27 Jul 2011 10:39:52 GMT&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h3_8">3.8 Addresses</h3>
        
        <p>The <strong><em>addresses</em></strong> collection represents IP addresses and is intended to allow IP address management.
         This collection is currently implemented for the Amazon EC2 cloud driver. For EC2, IP address management
        corresponds to Amazon's 'Elastic IP' feature. As such, the <strong><em>addresses</em></strong> collection supports operations
        for creating or destroying an <strong><em>address</em></strong> as well as associating or disassociating an <strong><em>address</em></strong> from
        a running <strong><em>instance</em></strong>.</p>
        
        <h4 id="h3_8_1"><code>GET /api/addresses</code></h4>
        
        <p>Retrieve a list of all <strong><em>addresses</em></strong>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/addresses?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Wed, 27 Jul 2011 12:55:16 GMT&#x000A;Content-Length: 817&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;addresses&gt;&#x000A;  &lt;address href='http://localhost:3001/api/addresses/107.20.232.251' id='107.20.232.251'&gt;&#x000A;    &lt;ip&gt;107.20.232.251&lt;/ip&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/addresses/107.20.232.251' method='delete' rel='destroy' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/addresses/107.20.232.251/associate' method='post' rel='associate' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;  &lt;/address&gt;&#x000A;  &lt;address href='http://localhost:3001/api/addresses/107.20.234.161' id='107.20.234.161'&gt;&#x000A;    &lt;ip&gt;107.20.234.161&lt;/ip&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/addresses/107.20.234.161' method='delete' rel='destroy' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/addresses/107.20.234.161/associate' method='post' rel='associate' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;  &lt;/address&gt;&#x000A;&lt;/addresses&gt;&#x000A;</code></pre>
        
        <h4 id="h3_8_2"><code>GET /api/addresses/:id</code></h4>
        
        <p>Retrieve details for a specific <strong><em>address</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/addresses/107.20.232.251?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Wed, 27 Jul 2011 12:57:27 GMT&#x000A;Content-Length: 402&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;address href='http://localhost:3001/api/addresses/107.20.232.251' id='107.20.232.251'&gt;&#x000A;  &lt;ip&gt;107.20.232.251&lt;/ip&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/addresses/107.20.232.251' method='delete' rel='destroy' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/addresses/107.20.232.251/associate' method='post' rel='associate' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;&lt;/address&gt;&#x000A;</code></pre>
        
        <h4 id="h3_8_3"><code>POST /api/addresses</code></h4>
        
        <p>This operation creates a new <strong><em>address</em></strong>. The Deltacloud server will respond with <strong>HTTP 201 Created</strong> and
        provide the details of the newly created <strong><em>address</em></strong> after a succesful operation:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/addresses?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Content-Type: application/xml&#x000A;Content-Length: 388&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;address href='http://localhost:3001/api/addresses/107.20.232.251' id='107.20.232.251'&gt;&#x000A;  &lt;ip&gt;107.20.232.251&lt;/ip&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/addresses/107.20.232.251' method='delete' rel='destroy' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/addresses/107.20.232.251/associate' method='post' rel='associate' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;&lt;/address&gt;&#x000A;</code></pre>
        
        <h4 id="h3_8_4"><code>DELETE /api/addresses/:id</code></h4>
        
        <p>Delete a specified address. The Deltacloud server responds with a <strong>HTTP 204 No Content</strong> after a
        succesful operation.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/addresses/107.20.232.251?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Wed, 27 Jul 2011 13:29:00 GMT&#x000A;</code></pre>
        
        <h4 id="h3_8_5"><code>POST /api/addresses/:id/associate</code></h4>
        
        <p>This operation associates a given <strong><em>address</em></strong> with a running <strong><em>instance</em></strong>. The client must
        specify the <em>instance_id</em> as a parameter to this call. For Amazon EC2, the specified <strong><em>address</em></strong>
        will replace the currently assigned <em>public_address</em> of the <strong><em>instance</em></strong>. A succesful operation will
        produce a <strong>HTTP 202 Accepted</strong> response:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/addresses/107.20.232.251/associate?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 156&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------e4c1d4718683&#x000A;&#x000A;------------------------------e4c1d4718683&#x000A;Content-Disposition: form-data; name="instance_id"&#x000A;&#x000A;i-9d8a3dfc&#x000A;------------------------------e4c1d4718683--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 202 Accepted&#x000A;Content-Type: application/xml&#x000A;Date: Wed, 27 Jul 2011 13:01:11 GMT&#x000A;Content-Length: 0&#x000A;</code></pre>
        
        <h4 id="h3_8_6"><code>POST /api/addresses/:id/disassociate</code></h4>
        
        <p>This operation disassociates a given <strong><em>address</em></strong> from the <strong><em>instance</em></strong> to which it is currently
        assigned.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/addresses/107.20.232.251/disassociate?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 202 Accepted&#x000A;Content-Type: application/xml&#x000A;Date: Wed, 27 Jul 2011 13:05:38 GMT&#x000A;Content-Length: 0&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h3_9">3.9 Load Balancers</h3>
        
        <p><strong><em>Load balancers</em></strong> allow distribution of ingress network traffic received by a specified IP address
        to a number of running <strong><em>instances</em></strong>. For example, a number of <strong><em>instances</em></strong> that are fulfilling the
        role of web servers can be attached to a single <strong><em>load_balancer</em></strong>. This would allow
        handling of large numbers of requests without degradation to the website performance.</p>
        
        <p>This collection is not supported by all back-end cloud providers and at present is implemented for the
        Gogrid and Amazon EC2 cloud drivers. A <strong><em>load_balancer</em></strong> is launched into a specific <strong><em>realm</em></strong>
        and typically only <strong><em>instances</em></strong> within that <strong><em>realm</em></strong> may be 'attached' to the balancer. Each
        <strong><em>load_balancer</em></strong> also has a list of <strong><em>instances</em></strong>, a <strong>public address</strong> representing the IP address
        that the balancer will respond to client requests on, a <strong>created_at</strong> timestamp and a list of
        <strong>listeners</strong>. Each <strong>listener</strong> has a <strong>protocol</strong> (e.g., 'TCP'), a <strong>load balancer port</strong> and
        an <strong>instance port</strong> which represent the network ports on which the balancer accepts
        connections and the port to which network traffic is forwarded to <strong><em>instances</em></strong> in the
        <strong>instance list</strong>, respectively.</p>
        
        <h4 id="h3_9_1"><code>GET /api/load_balancers</code></h4>
        
        <p>Retrieves details of all <strong><em>load_balancers</em></strong></p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/load_balancers?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 13:37:19 GMT&#x000A;Content-Length: 1844&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;load_balancers&gt;&#x000A;  &lt;load_balancer href='http://localhost:3001/api/load_balancers/webtraffic-balancer' id='webtraffic-balancer'&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/load_balancers/webtraffic-balancer' method='delete' rel='destroy' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/load_balancers/webtraffic-balancer/register' method='post' rel='register' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;    &lt;public_addresses&gt;&#x000A;      &lt;address&gt;webtraffic-balancer-1306196965.us-east-1.elb.amazonaws.com&lt;/address&gt;&#x000A;    &lt;/public_addresses&gt;&#x000A;    &lt;created_at&gt;Thu Jul 28 13:29:52 UTC 2011&lt;/created_at&gt;&#x000A;    &lt;realm href='http://localhost:3001/api/realms/us-east-1a' id='us-east-1a'&gt;&lt;/realm&gt;&#x000A;    &lt;listeners&gt;&#x000A;      &lt;listener protocol='HTTP'&gt;&#x000A;        &lt;load_balancer_port&gt;80&lt;/load_balancer_port&gt;&#x000A;        &lt;instance_port&gt;3001&lt;/instance_port&gt;&#x000A;      &lt;/listener&gt;&#x000A;    &lt;/listeners&gt;&#x000A;    &lt;instances&gt;&#x000A;    &lt;/instances&gt;&#x000A;  &lt;/load_balancer&gt;&#x000A;  &lt;load_balancer href='http://localhost:3001/api/load_balancers/secure-site-balancer' id='secure-site-balancer'&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/load_balancers/secure-site-balancer' method='delete' rel='destroy' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/load_balancers/secure-site-balancer/register' method='post' rel='register' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;    &lt;public_addresses&gt;&#x000A;      &lt;address&gt;secure-site-balancer-1347100846.us-east-1.elb.amazonaws.com&lt;/address&gt;&#x000A;    &lt;/public_addresses&gt;&#x000A;    &lt;created_at&gt;Thu Jul 28 13:36:29 UTC 2011&lt;/created_at&gt;&#x000A;    &lt;realm href='http://localhost:3001/api/realms/us-east-1a' id='us-east-1a'&gt;&lt;/realm&gt;&#x000A;    &lt;listeners&gt;&#x000A;      &lt;listener protocol='HTTP'&gt;&#x000A;        &lt;load_balancer_port&gt;443&lt;/load_balancer_port&gt;&#x000A;        &lt;instance_port&gt;443&lt;/instance_port&gt;&#x000A;      &lt;/listener&gt;&#x000A;    &lt;/listeners&gt;&#x000A;    &lt;instances&gt;&#x000A;    &lt;/instances&gt;&#x000A;  &lt;/load_balancer&gt;&#x000A;&lt;/load_balancers&gt;&#x000A;</code></pre>
        
        <h4 id="h3_9_2"><code>GET /api/load_balancers/:id</code></h4>
        
        <p>Retrieve details for a specific load balancer:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/load_balancers/secure-site-balancer?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 18:11:49 GMT&#x000A;Content-Length: 1361&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;load_balancer href='http://localhost:3001/api/load_balancers/secure-site-balancer' id='secure-site-balancer'&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/load_balancers/secure-site-balancer' method='delete' rel='destroy' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/load_balancers/secure-site-balancer/register' method='post' rel='register' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;  &lt;public_addresses&gt;&#x000A;    &lt;address&gt;secure-site-balancer-1347100846.us-east-1.elb.amazonaws.com&lt;/address&gt;&#x000A;  &lt;/public_addresses&gt;&#x000A;  &lt;created_at&gt;Thu Jul 28 13:36:29 UTC 2011&lt;/created_at&gt;&#x000A;  &lt;realm href='http://localhost:3001/api/realms/us-east-1a' id='us-east-1a'&gt;&lt;/realm&gt;&#x000A;  &lt;listeners&gt;&#x000A;    &lt;listener protocol='HTTP'&gt;&#x000A;      &lt;load_balancer_port&gt;443&lt;/load_balancer_port&gt;&#x000A;      &lt;instance_port&gt;443&lt;/instance_port&gt;&#x000A;    &lt;/listener&gt;&#x000A;  &lt;/listeners&gt;&#x000A;  &lt;instances&gt;&#x000A;    &lt;instance href='http://localhost:3001/api/instances/i-4f06b52e' id='i-4f06b52e'&gt;&#x000A;      &lt;link href='http://localhost:3001/api/load_balancers/secure-site-balancer/unregister?instance_id=i-4f06b52e' rel='unregister' /&gt;&#x000A;    &lt;/instance&gt;&#x000A;    &lt;instance href='http://localhost:3001/api/instances/i-d706b5b6' id='i-d706b5b6'&gt;&#x000A;      &lt;link href='http://localhost:3001/api/load_balancers/secure-site-balancer/unregister?instance_id=i-d706b5b6' rel='unregister' /&gt;&#x000A;    &lt;/instance&gt;&#x000A;  &lt;/instances&gt;&#x000A;&lt;/load_balancer&gt;&#x000A;</code></pre>
        
        <h4 id="h3_9_3"><code>POST /api/load_balancers</code></h4>
        
        <p>This operation creates a new <strong><em>load_balancer</em></strong>. Clients must provide the <strong><em>load_balancer</em></strong> <strong>name</strong>,
         the <strong>realm_id</strong> to which the balancer is to apply, a <strong>listener_protocol</strong> which the balancer will
        respond to (one of <strong>HTTP</strong> or <strong>TCP</strong>), the <strong>listener_balancer_port</strong> which specifies the port
        that the <strong><em>load_balancer</em></strong> will be expecting network traffic on and finally the <strong>listener_instance_port</strong>
        which specifies the port on which <strong><em>instances</em></strong> will be receiving network traffic forwarded by the
        <strong><em>load_balancer</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/load_balancers?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 603&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------395a7b3a9c77&#x000A;&#x000A;------------------------------395a7b3a9c77&#x000A;Content-Disposition: form-data; name="name"&#x000A;&#x000A;webtraffic-balancer&#x000A;------------------------------395a7b3a9c77&#x000A;Content-Disposition: form-data; name="realm_id"&#x000A;&#x000A;us-east-1c&#x000A;------------------------------395a7b3a9c77&#x000A;Content-Disposition: form-data; name="listener_protocol"&#x000A;&#x000A;HTTP&#x000A;------------------------------395a7b3a9c77&#x000A;Content-Disposition: form-data; name="listener_balancer_port"&#x000A;&#x000A;80&#x000A;------------------------------395a7b3a9c77&#x000A;Content-Disposition: form-data; name="listener_instance_port"&#x000A;&#x000A;3001&#x000A;------------------------------395a7b3a9c77--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 13:30:05 GMT&#x000A;Content-Length: 884&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;load_balancer href='http://localhost:3001/api/load_balancers/webtraffic-balancer' id='webtraffic-balancer'&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/load_balancers/webtraffic-balancer' method='delete' rel='destroy' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/load_balancers/webtraffic-balancer/register' method='post' rel='register' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;  &lt;public_addresses&gt;&#x000A;    &lt;address&gt;webtraffic-balancer-1306196965.us-east-1.elb.amazonaws.com&lt;/address&gt;&#x000A;  &lt;/public_addresses&gt;&#x000A;  &lt;created_at&gt;Thu Jul 28 13:29:52 UTC 2011&lt;/created_at&gt;&#x000A;  &lt;realm href='http://localhost:3001/api/realms/us-east-1a' id='us-east-1a'&gt;&lt;/realm&gt;&#x000A;  &lt;listeners&gt;&#x000A;    &lt;listener protocol='HTTP'&gt;&#x000A;      &lt;load_balancer_port&gt;80&lt;/load_balancer_port&gt;&#x000A;      &lt;instance_port&gt;3001&lt;/instance_port&gt;&#x000A;    &lt;/listener&gt;&#x000A;  &lt;/listeners&gt;&#x000A;  &lt;instances&gt;&#x000A;  &lt;/instances&gt;&#x000A;&lt;/load_balancer&gt;&#x000A;</code></pre>
        
        <h4 id="h3_9_4"><code>DELETE /api/load_balancers/:id</code></h4>
        
        <p>Delete the specified <strong><em>load_balancer</em></strong> from the back-end cloud provider. The Deltacloud
        server will respond with <strong>HTTP 204 No Content</strong> for a succesful operation:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/load_balancers/webtraffic-balancer?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Thu, 28 Jul 2011 13:23:33 GMT&#x000A;</code></pre>
        
        <h4 id="h3_9_5"><code>POST /api/load_balancers/:id/register</code></h4>
        
        <p>This operation registers a running <strong><em>instance</em></strong> with a specified <strong><em>load_balancer</em></strong>. Clients
        must provide the <strong>instance_id</strong> as a parameter to the request. The Deltacloud server will respond
        with a <strong>HTTP 204 No Content</strong> after a succesful operation:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/load_balancers/secure-site-balancer/register?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 156&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------6af752b909b2&#x000A;&#x000A;------------------------------6af752b909b2&#x000A;Content-Disposition: form-data; name="instance_id"&#x000A;&#x000A;i-4f06b52e&#x000A;------------------------------6af752b909b2--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Thu, 28 Jul 2011 18:20:03 GMT&#x000A;</code></pre>
        
        <h4 id="h3_9_6"><code>POST /api/load_balancers/:id/unregister</code></h4>
        
        <p>This operation will unregister a specified <strong><em>instance</em></strong> from the given <strong><em>load_balancer</em></strong>. The
        client must supply the <strong>instance_id</strong> parameter to identify the <strong><em>instance</em></strong>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/load_balancers/secure-site-balancer/unregister?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 156&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------987218f60703&#x000A;&#x000A;------------------------------987218f60703&#x000A;Content-Disposition: form-data; name="instance_id"&#x000A;&#x000A;i-4f06b52e&#x000A;------------------------------987218f60703--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Thu, 28 Jul 2011 19:09:17 GMT&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h2 id="h4">4. Storage Resources</h2>
        
        <p>Storage resources are divided into two groups: <strong><em>storage volumes</em></strong> can be attached
        to a running instance (accessible by the instance OS), and <em>blob storage</em>
        which represents a generic 'key &lt;−−> value' based data store, as implemented
        by Rackspace CloudFiles or Amazon S3. <strong><em>Storage snapshots</em></strong> represent a <strong><em>storage volume</em></strong>,
        a backup of which is created at a particular point in time (a snapshot).</p>
        
        <h3 id="h4_1">4.1 Storage Volumes</h3>
        
        <p>A <strong><em>storage_volume</em></strong> has a <strong>capacity</strong> expressed in Gigabytes, a <strong>created</strong> timestamp, a <strong>realm_id</strong>
        specifying the <strong><em>realm</em></strong> in which the volume exists, a <strong>state</strong> (for Amazon EC2 this is one of
        creating | available | in-use | deleting | deleted | error) and a set of <strong>actions</strong>. When attached to
        an <strong><em>instance</em></strong>, a <strong><em>storage_volume</em></strong> will also expose a <strong>mount</strong> element which contains the
        attributes <strong>instance</strong> and <strong>device</strong>, specifying the <strong><em>instance</em></strong> to which the volume is attached
        and the mount point (e.g. /dev/sdh), respectively.</p>
        
        <h4 id="h4_1_1"><code>GET /api/storage_volumes</code></h4>
        
        <p>List all <strong><em>storage volumes</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/storage_volumes?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 21:04:09 GMT&#x000A;Content-Length: 1341&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;storage_volumes&gt;&#x000A;  &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' id='vol-0bc0de60'&gt;&#x000A;    &lt;created&gt;Thu Jul 28 20:44:18 UTC 2011&lt;/created&gt;&#x000A;    &lt;capacity unit='GB'&gt;10&lt;/capacity&gt;&#x000A;        &lt;realm_id&gt;us-east-1c&lt;/realm_id&gt;&#x000A;    &lt;state&gt;AVAILABLE&lt;/state&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60/attach' method='post' rel='attach' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60/detach' method='post' rel='detach' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' method='delete' rel='destroy' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;  &lt;/storage_volume&gt;&#x000A;  &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2' id='vol-99fbe5f2'&gt;&#x000A;    &lt;created&gt;Thu Jul 28 20:56:07 UTC 2011&lt;/created&gt;&#x000A;    &lt;capacity unit='GB'&gt;15&lt;/capacity&gt;&#x000A;    &lt;realm_id&gt;us-east-1c&lt;/realm_id&gt;&#x000A;    &lt;state&gt;AVAILABLE&lt;/state&gt;&#x000A;    &lt;actions&gt;&#x000A;      &lt;link href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2/attach' method='post' rel='attach' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2/detach' method='post' rel='detach' /&gt;&#x000A;      &lt;link href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2' method='delete' rel='destroy' /&gt;&#x000A;    &lt;/actions&gt;&#x000A;  &lt;/storage_volume&gt;&#x000A;&lt;/storage_volumes&gt;&#x000A;</code></pre>
        
        <h4 id="h4_1_2"><code>GET /api/storage_volumes/:id</code></h4>
        
        <p>This operation retrieves the details for the specified storage_volume:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/storage_volumes/vol-99fbe5f2?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 21:06:39 GMT&#x000A;Content-Length: 794&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2' id='vol-99fbe5f2'&gt;&#x000A;  &lt;created&gt;Thu Jul 28 20:56:07 UTC 2011&lt;/created&gt;&#x000A;  &lt;capacity unit='GB'&gt;15&lt;/capacity&gt;&#x000A;  &lt;realm_id&gt;us-east-1c&lt;/realm_id&gt;&#x000A;  &lt;state&gt;IN-USE&lt;/state&gt;&#x000A;  &lt;mount&gt;&#x000A;    &lt;instance href='i-b100b3d0' id='i-b100b3d0'&gt;&lt;/instance&gt;&#x000A;    &lt;device name='/dev/sdh'&gt;&lt;/device&gt;&#x000A;  &lt;/mount&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2/attach' method='post' rel='attach' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2/detach' method='post' rel='detach' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2' method='delete' rel='destroy' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;&lt;/storage_volume&gt;&#x000A;</code></pre>
        
        <h4 id="h4_1_3"><code>POST /api/storage_volumes</code></h4>
        
        <p>This operation will create a new <strong><em>storage_volume</em></strong>. A client may specify a <strong>snapshot_id</strong> from which
        to instantiate the <strong><em>storage_volume</em></strong> though this is optional. The <strong>capacity</strong> parameter, expressed in
        Gigabytes, is also optional and will default to 1 Gigabyte. Finally clients may also specify the
        <strong>realm_id</strong> as a <strong><em>storage_volume</em></strong> can typically only be attached to <strong><em>instances</em></strong> running within
        the specified <strong><em>realm</em></strong>. If the <strong><em>realm</em></strong> is not specified it will default to the first realm returned
         by the cloud provider. A succesful operation will return <strong>HTTP 201 Created</strong> with the details of the newly
        created <strong><em>storage_volume</em></strong>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/storage_volumes?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 252&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------90dea979a9f4&#x000A;&#x000A;------------------------------90dea979a9f4&#x000A;Content-Disposition: form-data; name="capacity"&#x000A;&#x000A;10&#x000A;------------------------------90dea979a9f4&#x000A;Content-Disposition: form-data; name="realm_id"&#x000A;&#x000A;us-east-1c&#x000A;------------------------------90dea979a9f4--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Date: Thu, 28 Jul 2011 20:44:27 GMT&#x000A;Content-Length: 649&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' id='vol-0bc0de60'&gt;&#x000A;  &lt;created&gt;Thu Jul 28 20:44:18 UTC 2011&lt;/created&gt;&#x000A;  &lt;capacity unit='GB'&gt;10&lt;/capacity&gt;&#x000A;  &lt;realm_id&gt;us-east-1c&lt;/realm_id&gt;&#x000A;  &lt;state&gt;CREATING&lt;/state&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60/attach' method='post' rel='attach' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60/detach' method='post' rel='detach' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' method='delete' rel='destroy' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;&lt;/storage_volume&gt;&#x000A;</code></pre>
        
        <h4 id="h4_1_4"><code>DELETE /api/storage_volumes/:id</code></h4>
        
        <p>Deletes the specified <strong><em>storage_volume</em></strong>. The operation will return a <strong>HTTP 204 No Content</strong> after
        a succesful operation. Note that the operation will fail if the given <strong><em>storage_volume</em></strong> is currently
        attached to an <strong><em>instance</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/storage_volumes/vol-0bc0de60?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Thu, 28 Jul 2011 22:34:29 GMT&#x000A;</code></pre>
        
        <p><code>Example request: (error deleting a volume currently attached to an instance</code></p>
        
        <pre><code>DELETE /api/storage_volumes/vol-0bc0de60?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 502 Bad Gateway&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 22:30:07 GMT&#x000A;Content-Length: 617&#x000A;&#x000A;&lt;error status='502' url='/api/storage_volumes/vol-0bc0de60?format=xml'&gt;&#x000A;  &lt;kind&gt;backend_error&lt;/kind&gt;&#x000A;  &lt;backend driver='ec2'&gt;&#x000A;    &lt;code&gt;502&lt;/code&gt;&#x000A;  &lt;/backend&gt;&#x000A;  &lt;message&gt;&lt;![CDATA[Client.VolumeInUse: Volume vol-0bc0de60 is currently attached to i-b100b3d0&#x000A;  REQUEST=ec2.us-east-1.amazonaws.com:443/?AWSAccessKeyId=AKIAJATNOR5HKG3FK27Q&amp;Action=DeleteVolume&amp;SignatureMethod=HmacSHA256&amp;SignatureVersion=2&amp;Timestamp=2011-07-28T22%3A30%3A00.000Z&amp;Version=2010-08-31&amp;VolumeId=vol-0bc0de60&amp;Signature=WnZTd9vFaUZEwfuifyo3%2FWa2HBEG1S7R8Iv%2FHqc%2BmqE%3D&#x000A;  REQUEST ID=5dff67bb-d63a-4055-b550-f323fa16e185]]&gt;&lt;/message&gt;&#x000A;&lt;/error&gt;&#x000A;</code></pre>
        
        <h4 id="h4_1_5"><code>POST /api/storage_volumes/:id/attach</code></h4>
        
        <p>This operation will attach the specified <strong><em>storage_volume</em></strong> to a running <strong><em>instance</em></strong>. Clients must
        specify the <strong>instance_id</strong> and the <strong>device</strong> as parameters. The <strong>device</strong> parameter is used as the
        'mount point', that is, the location at which the <strong><em>storage_volume</em></strong> will be exposed to the given
        <strong><em>instance</em></strong> (e.g., /dev/sdh). The Deltacloud server will respond with a <strong>HTTP 202 Accepted</strong> after
        a succesful attach operation together with details of the <strong><em>storage_volume</em></strong>. Note in the example
         below that the <strong>state</strong> is reported as 'unknown' although the <strong>mount</strong> element is present, as the
        processing has not yet been completed (hence the <strong>202</strong> status code).</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/storage_volumes/vol-0bc0de60/attach?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 259&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------5a074e9c5fcc&#x000A;&#x000A;------------------------------5a074e9c5fcc&#x000A;Content-Disposition: form-data; name="instance_id"&#x000A;&#x000A;i-b100b3d0&#x000A;------------------------------5a074e9c5fcc&#x000A;Content-Disposition: form-data; name="device"&#x000A;&#x000A;/dev/sdi&#x000A;------------------------------5a074e9c5fcc--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 202 Accepted&#x000A;Date: Thu, 28 Jul 2011 21:36:17 GMT&#x000A;Content-Length: 709&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' id='vol-0bc0de60'&gt;&#x000A;  &lt;capacity unit='GB'&gt;&lt;/capacity&gt;&#x000A;  &lt;device&gt;/dev/sdi&lt;/device&gt;&#x000A;  &lt;state&gt;unknown&lt;/state&gt;&#x000A;  &lt;mount&gt;&#x000A;    &lt;instance href='i-b100b3d0' id='i-b100b3d0'&gt;&lt;/instance&gt;&#x000A;    &lt;device name='/dev/sdi'&gt;&lt;/device&gt;&#x000A;  &lt;/mount&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60/attach' method='post' rel='attach' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60/detach' method='post' rel='detach' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' method='delete' rel='destroy' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;&lt;/storage_volume&gt;&#x000A;</code></pre>
        
        <h4 id="h4_1_6"><code>POST /api/storage_volumes/:id/detach</code></h4>
        
        <p>This operation detaches the given <strong><em>storage_volume</em></strong> from the <strong><em>instance</em></strong> to which it is currently
        attached. A succesful operation will return <strong>HTTP 201 Accepted</strong> together with details of the
        <strong><em>storage_volume</em></strong>. Note in the example that like the <strong><em>attach</em></strong> operation above, <strong>state</strong> is
         reported as 'unknown' and the <strong>mount</strong> element is still present as the processing has not yet been
        completed (hence the <strong>202</strong> status code).</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/storage_volumes/vol-0bc0de60/detach?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 202 Accepted&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 21:29:18 GMT&#x000A;Content-Length: 709&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' id='vol-0bc0de60'&gt;&#x000A;  &lt;capacity unit='GB'&gt;&lt;/capacity&gt;&#x000A;  &lt;device&gt;/dev/sdi&lt;/device&gt;&#x000A;  &lt;state&gt;unknown&lt;/state&gt;&#x000A;  &lt;mount&gt;&#x000A;    &lt;instance href='i-b100b3d0' id='i-b100b3d0'&gt;&lt;/instance&gt;&#x000A;    &lt;device name='/dev/sdi'&gt;&lt;/device&gt;&#x000A;  &lt;/mount&gt;&#x000A;  &lt;actions&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60/attach' method='post' rel='attach' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60/detach' method='post' rel='detach' /&gt;&#x000A;    &lt;link href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' method='delete' rel='destroy' /&gt;&#x000A;  &lt;/actions&gt;&#x000A;&lt;/storage_volume&gt;&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h4_2">4.2 Storage Snapshots</h3>
        
        <p>A <strong><em>storage_snapshot</em></strong> captures the point-in-time state of a <strong><em>storage_volume</em></strong>. Each snapshot has
        a <strong>created</strong> timestamp, and a <strong><em>storage_volume</em></strong> attribute referring to the volume from which the
        snapshot was made.</p>
        
        <h4 id="h4_2_1"><code>GET /api/storage_snapshots</code></h4>
        
        <p>List all available <strong><em>storage snapshots</em></strong>. For Amazon EC2 this list includes <em>any</em> snapshots that
        are available to the requesting client account, including those that may not have been created by that
        account. As this list is very long the example below shows only part of the response:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/storage_snapshots?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 22:08:36 GMT&#x000A;Content-Length: 156897&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;storage_snapshots&gt;&#x000A;  &lt;storage_snapshot href='http://localhost:3001/api/storage_snapshots/snap-45b8d024' id='snap-45b8d024'&gt;&#x000A;    &lt;created&gt;Thu Jul 28 21:54:19 UTC 2011&lt;/created&gt;&#x000A;    &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' id='vol-0bc0de60'&gt;&lt;/storage_volume&gt;&#x000A;  &lt;/storage_snapshot&gt;&#x000A;  &lt;storage_snapshot href='http://localhost:3001/api/storage_snapshots/snap-d5a1c9b4' id='snap-d5a1c9b4'&gt;&#x000A;    &lt;created&gt;Thu Jul 28 21:46:12 UTC 2011&lt;/created&gt;&#x000A;    &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2' id='vol-99fbe5f2'&gt;&lt;/storage_volume&gt;&#x000A;  &lt;/storage_snapshot&gt;&#x000A;  &lt;storage_snapshot href='http://localhost:3001/api/storage_snapshots/snap-dda6cebc' id='snap-dda6cebc'&gt;&#x000A;    &lt;created&gt;Thu Jul 28 21:51:55 UTC 2011&lt;/created&gt;&#x000A;    &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2' id='vol-99fbe5f2'&gt;&lt;/storage_volume&gt;&#x000A;  &lt;/storage_snapshot&gt;&#x000A;  &lt;storage_snapshot href='http://localhost:3001/api/storage_snapshots/snap-d010f6b9' id='snap-d010f6b9'&gt;&#x000A;    &lt;created&gt;Mon Oct 20 18:23:59 UTC 2008&lt;/created&gt;&#x000A;    &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-351efb5c' id='vol-351efb5c'&gt;&lt;/storage_volume&gt;&#x000A;  &lt;/storage_snapshot&gt;&#x000A;  &lt;storage_snapshot href='http://localhost:3001/api/storage_snapshots/snap-a310f6ca' id='snap-a310f6ca'&gt;&#x000A;    &lt;created&gt;Mon Oct 20 18:25:53 UTC 2008&lt;/created&gt;&#x000A;    &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-001efb69' id='vol-001efb69'&gt;&lt;/storage_volume&gt;&#x000A;  &lt;/storage_snapshot&gt;&#x000A;  (...)&#x000A;&lt;/storage_snapshots&gt;&#x000A;</code></pre>
        
        <h4 id="h4_2_2"><code>GET /api/storage_snapshots/:id</code></h4>
        
        <p>Get all details for a specified <strong><em>storage snapshot</em></strong>, as shown below:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/storage_snapshots/snap-45b8d024?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Date: Thu, 28 Jul 2011 22:08:36 GMT&#x000A;Content-Length: 329&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;storage_snapshot href='http://localhost:3001/api/storage_snapshots/snap-45b8d024' id='snap-45b8d024'&gt;&#x000A;  &lt;created&gt;Thu Jul 28 21:54:19 UTC 2011&lt;/created&gt;&#x000A;  &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-0bc0de60' id='vol-0bc0de60'&gt;&lt;/storage_volume&gt;&#x000A;&lt;/storage_snapshot&gt;&#x000A;</code></pre>
        
        <h4 id="h4_2_3"><code>POST /api/storage_snapshots</code></h4>
        
        <p>This operation will create a new <strong><em>storage_snapshot</em></strong>. Clients must specify the <strong><em>storage_volume</em></strong>
        from which the snapshot is to be created, by supplying the <strong>volume_id</strong> parameter. The Deltacloud
        server responds with <strong>HTTP 201 Created</strong> after a succesful operation and provides details of the
        newly created <strong><em>storage_snapshot</em></strong>:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/storage_snapshots?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 156&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------91f7fa88be76&#x000A;&#x000A;------------------------------91f7fa88be76&#x000A;Content-Disposition: form-data; name="volume_id"&#x000A;&#x000A;vol-99fbe5f2&#x000A;------------------------------91f7fa88be76--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Date: Thu, 28 Jul 2011 21:46:48 GMT&#x000A;Content-Length: 329&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;storage_snapshot href='http://localhost:3001/api/storage_snapshots/snap-d5a1c9b4' id='snap-d5a1c9b4'&gt;&#x000A;  &lt;created&gt;Thu Jul 28 21:46:12 UTC 2011&lt;/created&gt;&#x000A;  &lt;storage_volume href='http://localhost:3001/api/storage_volumes/vol-99fbe5f2' id='vol-99fbe5f2'&gt;&lt;/storage_volume&gt;&#x000A;&lt;/storage_snapshot&gt;&#x000A;</code></pre>
        
        <h4 id="h4_2_4"><code>DELETE /api/storage_snapshots/:id</code></h4>
        
        <p>Deletes the specified <strong><em>storage_snapshot</em></strong>. The operation returns a <strong>HTTP 204 No Content</strong> after a
        succesful operation:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/storage_snapshots/snap-dda6cebc?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Date: Thu, 28 Jul 2011 22:26:07 GMT&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
        
        <h3 id="h4_3">4.3 Blob Storage</h3>
        
        <p>Blob storage represents a generic <em>key</em> ==> <em>value</em> data store, as implemented by Amazon S3
        or Rackspace Cloudfiles. In Deltacloud, the organisational unit of blob storage is a
         <strong><em>Bucket</em></strong>. Individual data items, <strong><em>Blobs</em></strong> are exposed as a subcollection
        under each <strong><em>Bucket</em></strong>.</p>
        
        <p>A <strong><em>bucket</em></strong> has a <strong><em>name</em></strong>, a <strong>size</strong> (denotes the number of <strong><em>blobs</em></strong> it
        contains) and a list of links to each <strong><em>blob</em></strong>.</p>
        
        <p>A <strong><em>blob</em></strong> has a <strong>content_length</strong>, a <strong>content_type</strong>, a <strong>last_modified</strong>
        timestamp, a structure containing <strong>user_metadata</strong>, a link to the blob <strong>content</strong>
         and the name of the <strong><em>bucket</em></strong> in which this <strong><em>blob</em></strong> exists.</p>
        
        <h4 id="h4_3_1"><code>GET /api/buckets</code></h4>
        
        <p>Returns a list of all <strong><em>buckets</em></strong> belonging to the given cloud provider account.
        The response from the Deltacloud server includes the <em>name</em> and <em>URI</em> of each
        <strong><em>bucket</em></strong> but not the <em>size</em> or the list of <strong><em>blobs</em></strong> contained within them.
         These details are available when a client requests (<em>GET</em>s) a specific <strong><em>bucket</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/buckets?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 597&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;buckets&gt;&#x000A;  &lt;bucket href='http://localhost:3001/api/buckets/mybucket1' id='mybucket1'&gt;&#x000A;    &lt;name&gt;mybucket1&lt;/name&gt;&#x000A;    &lt;size&gt;&lt;/size&gt;&#x000A;  &lt;/bucket&gt;&#x000A;  &lt;bucket href='http://localhost:3001/api/buckets/mybucket2' id='mybucket2'&gt;&#x000A;    &lt;name&gt;mybucket2&lt;/name&gt;&#x000A;    &lt;size&gt;&lt;/size&gt;&#x000A;  &lt;/bucket&gt;&#x000A;  &lt;bucket href='http://localhost:3001/api/buckets/mybucket3' id='mybucket3'&gt;&#x000A;    &lt;name&gt;mybucket3&lt;/name&gt;&#x000A;    &lt;size&gt;&lt;/size&gt;&#x000A;  &lt;/bucket&gt;&#x000A;  &lt;bucket href='http://localhost:3001/api/buckets/mybucket4' id='mybucket4'&gt;&#x000A;    &lt;name&gt;mybucket4&lt;/name&gt;&#x000A;    &lt;size&gt;&lt;/size&gt;&#x000A;  &lt;/bucket&gt;&#x000A;&lt;/buckets&gt;&#x000A;</code></pre>
        
        <h4 id="h4_3_2"><code>GET /api/buckets/:id</code></h4>
        
        <p>Returns the details of a specific <strong><em>bucket</em></strong>, as shown below. The Deltacloud server
        response includes the <em>size</em> of the <strong><em>bucket</em></strong> and the URI for each <strong><em>blob</em></strong> object
        that it contains.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/buckets/mybucket1?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 534&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;bucket href='http://localhost:3001/api/buckets/mybucket1' id='mybucket1'&gt;&#x000A;  &lt;name&gt;mybucket1&lt;/name&gt;&#x000A;  &lt;size&gt;4&lt;/size&gt;&#x000A;  &lt;blob href='http://localhost:3001/api/buckets/mybucket1/myfile' id='myfile'&gt;&lt;/blob&gt;&#x000A;  &lt;blob href='http://localhost:3001/api/buckets/mybucket1/an_object' id='an_object'&gt;&lt;/blob&gt;&#x000A;  &lt;blob href='http://localhost:3001/api/buckets/mybucket1/picture_blob' id='picture_blob'&gt;&lt;/blob&gt;&#x000A;  &lt;blob href='http://localhost:3001/api/buckets/mybucket1/some_blob id='some_blob'&gt;&lt;/blob&gt;&#x000A;&lt;/bucket&gt;&#x000A;</code></pre>
        
        <h4 id="h4_3_3"><code>POST /api/buckets</code></h4>
        
        <p>Creates a new <strong><em>bucket</em></strong> and requires that you specify the <strong><em>name</em></strong> as a parameter,
        in the form of multipart/form-data (i.e., HTTP form field). Optionally for Amazon S3
        buckets, you can specify a bucket location with the <strong><em>location</em></strong> parameter, as per
         <a href="http://docs.amazonwebservices.com/general/latest/gr/index.html?rande.html" title="AWS Regions and Endpoints">Regions and Endpoints for Amazon Simple Storage Service</a>;
        valid values for S3 bucket <em>location</em> parameter are: "us-west-1", "EU",
        "ap-southeast-1", "ap-northeast-1" (while not specifying a location defaults to
        the "US Standard" region).</p>
        
        <p>On succesful creation this call will return a <strong><em>201</em></strong> HTTP status, specifying the URI
        of the newly created bucket in the <strong>Location</strong> header and the newly created
        <strong><em>bucket</em></strong> object in the response message body. The example request below creates a
        new <strong><em>bucket</em></strong> in the <em>EU (Ireland)</em> region. If the given backend cloud does not
        support locations then the <em>location</em> parameter is silently ignored.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/buckets?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;Content-Length: 252&#x000A;Content-Type: multipart/form-data; boundary=----------------------------4e90611c39f2&#x000A;&#x000A;------------------------------4e90611c39f2&#x000A;Content-Disposition: form-data; name="name"&#x000A;&#x000A;mybucketeurope&#x000A;------------------------------4e90611c39f2&#x000A;Content-Disposition: form-data; name="location"&#x000A;&#x000A;EU&#x000A;------------------------------4e90611c39f2--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 201 Created&#x000A;Location: http://localhost:3001/api/buckets/mybucketeurope&#x000A;Content-Type: application/xml&#x000A;Content-Length: 182&#x000A;&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;bucket href='http://localhost:3001/api/buckets/mybucketeurope' id='mybucketeurope'&gt;&#x000A;  &lt;name&gt;mybucketeurope&lt;/name&gt;&#x000A;  &lt;size&gt;0&lt;/size&gt;&#x000A;&lt;/bucket&gt;&#x000A;</code></pre>
        
        <h4 id="h4_3_4"><code>DELETE /api/buckets/:id</code></h4>
        
        <p>Deletes the specified <strong><em>bucket</em></strong>, which must be empty (otherwise the call will
        fail with an error response). A succesful operation will return <strong><em>204 No Content</em></strong>.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/buckets/mybucketeurope?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;</code></pre>
        
        <h4 id="h4_3_5"><code>GET /api/buckets/:bucket_id/:blob_id</code></h4>
        
        <p>Retrieve the details of a specific <strong><em>blob</em></strong>. The <strong><em>blob</em></strong> content is <em>not</em> returned
        as part of the response but rather a URI is given from which the content may be
        retrieved as shown below:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/buckets/mariosbucket1/some_more_blob_woo?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Type: application/xml&#x000A;Content-Length: 586&#x000A;&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;blob href='http://localhost:3001/api/buckets/mariosbucket1/some_more_blob_woo' id='some_more_blob_woo'&gt;&#x000A;  &lt;bucket&gt;mariosbucket1&lt;/bucket&gt;&#x000A;  &lt;content_length&gt;86&lt;/content_length&gt;&#x000A;  &lt;content_type&gt;text/plain&lt;/content_type&gt;&#x000A;  &lt;last_modified&gt;Fri Jan 28 12:23:08 UTC 2011&lt;/last_modified&gt;&#x000A;  &lt;user_metadata&gt;&#x000A;    &lt;entry key='v'&gt;&#x000A;      &lt;![CDATA[0.2.0]]&gt;&#x000A;    &lt;/entry&gt;&#x000A;    &lt;entry key='test'&gt;&#x000A;      &lt;![CDATA[value]]&gt;&#x000A;    &lt;/entry&gt;&#x000A;  &lt;/user_metadata&gt;&#x000A;  &lt;content href='http://localhost:3001/api/buckets/mariosbucket1/some_more_blob_woo/content'&gt;&lt;/content&gt;&#x000A;&lt;/blob&gt;&#x000A;</code></pre>
        
        <h4 id="h4_3_6"><code>GET /api/buckets/:bucket_id/:blob_id/content</code></h4>
        
        <p>Retrieve the actual blob content, the location of which is specified in the <strong><em>content</em></strong>
        URI returned from the <code>GET /api/buckets/:bucket_id/:blob_id</code> call. The content is streamed
        through the deltacloud server as this is received from the back-end cloud provider, to
        avoid the creation of a temporary file (especially significant in the case of large
        <strong><em>blobs</em></strong>). The Deltacloud server sets <em>Content-Disposition: attachment;
        filename=blob_name</em> in the HTTP response headers.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>GET /api/buckets/mariosanotherbucketohyeah/Im_a_blob_beholdme/content?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 200 OK&#x000A;Content-Disposition: attachment; filename=Im_a_blob_beholdme&#x000A;Content-Type: text/plain&#x000A;Content-Length: 50&#x000A;&#x000A;&lt;BLOB DATA HERE&gt;&#x000A;</code></pre>
        
        <h4 id="h4_3_7"><code>PUT /api/buckets/:bucket_id/:blob_id</code></h4>
        
        <p>Creates a <strong><em>blob</em></strong> object and sets its content. If the <strong><em>blob</em></strong> already exists then
        its data and metadata are overwritten with those specified in this call. The request
        must specify the <em>name</em> of the <strong><em>blob</em></strong> and the <em>name</em> of the <strong><em>bucket</em></strong> in which
        the <strong><em>blob</em></strong> is to be placed, in the call URI. The client must also specify in the
        HTTP headers the <em>content_length</em> of the <strong><em>blob</em></strong> data and the <strong><em>blob</em></strong> data
        itself. Optionally the call may also specify a <em>content_type</em> and any number of
        <strong><em>key:value</em></strong> pairs of user defined <em>metadata</em>. User metadata is defined using
        'X-Deltacloud-Blobmeta-' header, e.g. <strong><em>X-Deltacloud-Blobmeta-Version:2.1</em></strong>.</p>
        
        <p>To eliminate the necessity of creating a local file at the deltacloud server for
        each <strong><em>blob</em></strong> created, the deltacloud server starts to stream the blob data to
        the back-end cloud provider as soon as the request headers are processed. A
        succesful operation will return the newly created blob object, as shown below:</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>PUT /api/buckets/mybucket/12Jul2011blob?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;Content-Type: text/plain&#x000A;Content-Length: 128988&#x000A;X-Deltacloud-Blobmeta-Version:2.1&#x000A;X-Deltacloud-Blobmeta-Author:msa&#x000A;&#x000A;... BLOB DATA ...&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;blob href='http://localhost:3001/api/buckets/mybucket/12Jul2011blob' id='12Jul2011blob'&gt;&#x000A;  &lt;bucket&gt;mybucket&lt;/bucket&gt;&#x000A;  &lt;content_length&gt;128988&lt;/content_length&gt;&#x000A;  &lt;content_type&gt;text/plain&lt;/content_type&gt;&#x000A;  &lt;last_modified&gt;Wed Jul 13 13:27:22 UTC 2011&lt;/last_modified&gt;&#x000A;  &lt;user_metadata&gt;&#x000A;    &lt;entry key='author'&gt;&#x000A;      &lt;![CDATA[msa]]&gt;&#x000A;    &lt;/entry&gt;&#x000A;    &lt;entry key='version'&gt;&#x000A;      &lt;![CDATA[2.1]]&gt;&#x000A;    &lt;/entry&gt;&#x000A;  &lt;/user_metadata&gt;&#x000A;  &lt;content href='http://localhost:3001/api/buckets/mybucket/12Jul2011blob/content'&gt;&#x000A;  &lt;/content&gt;&#x000A;&lt;/blob&gt;&#x000A;</code></pre>
        
        <h4 id="h4_3_8"><code>POST /api/buckets/:bucket_id</code></h4>
        
        <p>The deltacloud server also responds to an alternative <code>POST</code> route for creating or
        updating a <strong><em>blob</em></strong> object. As with the <code>PUT</code> method for creating/updating a
        <strong><em>blob</em></strong>, the client must specify the <strong><em>bucket</em></strong> in which the <strong><em>blob</em></strong> is to
        be created through the call URI (i.e. you <code>POST</code> to the specified <strong><em>bucket</em></strong>).
        The rest of the required fields, that is, the name of the <strong><em>blob</em></strong>, the
         <strong><em>blob_data</em></strong> and the <strong><em>content-length</em></strong> are specified by the client as
        <strong><em>multipart/form-data</em></strong> (i.e. in <code>HTTP POST</code> form fields).</p>
        
        <p>In order to specify the optional user metadata for a given <strong><em>blob</em></strong> the client
        must set the form field <strong><em>meta_params</em></strong> to specify the number of metadata
        key/value pairs. The metadata itself is then specified by the client with fields
        of the form <strong><em>meta_nameN</em></strong> and <strong><em>meta_valueN</em></strong> where <em>N</em> is an integer from
        <em>1</em> upto the number specified by the <strong><em>meta_params</em></strong> field (e.g.
        <strong><em>meta_name1=author</em></strong>, <strong><em>meta_value1=jrd</em></strong>).</p>
        
        <p>It should be noted that the <code>POST</code> method for creating a blob is <em>non streaming</em>
        - that is, the Deltacloud server will create a temporary file with the blob data,
        before this is transferred to the backend cloud. Thus, it should only be used for
        <strong><em>blobs</em></strong> with a relatively small content-length and in general the <code>PUT</code> method
        should be preferred for larger <strong><em>blobs</em></strong>. This <code>POST</code> method is mainly provided
        for clients that cannot easily invoke a <code>HTTP PUT</code> operation (for instance,
        web browsers) and can be used for creating/updating a  <strong><em>blob</em></strong> through the
        deltacloud HTML interface (provided for testing purposes).</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/buckets/mybucket?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu) libcurl/7.20.1 N&#x000A;Accept: */*&#x000A;Content-Length: 113582&#x000A;Expect: 100-continue&#x000A;Content-Type: multipart/form-data; boundary=----------------------------517f5f2df858&#x000A;&#x000A;------------------------------517f5f2df858&#x000A;Content-Disposition: form-data; name="blob"&#x000A;&#x000A;12Jul2011blob&#x000A;------------------------------517f5f2df858&#x000A;Content-Disposition: form-data; name="blob_data"; filename="small.txt"&#x000A;Content-Type: text/plain&#x000A;&#x000A;&lt;THE_BLOB_DATA_HERE&gt;&#x000A;&#x000A;------------------------------517f5f2df858&#x000A;Content-Disposition: form-data; name="meta_params"&#x000A;&#x000A;2&#x000A;------------------------------517f5f2df858&#x000A;Content-Disposition: form-data; name="meta_name1"&#x000A;&#x000A;author&#x000A;------------------------------517f5f2df858&#x000A;Content-Disposition: form-data; name="meta_value1"&#x000A;jjs&#x000A;------------------------------517f5f2df858&#x000A;Content-Disposition: form-data; name="meta_name2"&#x000A;&#x000A;version&#x000A;------------------------------517f5f2df858&#x000A;Content-Disposition: form-data; name="meta_value2"&#x000A;&#x000A;2.2&#x000A;------------------------------517f5f2df858--&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>&lt;?xml version='1.0' encoding='utf-8' ?&gt;&#x000A;&lt;blob href='http://localhost:3001/api/buckets/mybucket/12Jul2011blob' id='12Jul2011blob'&gt;&#x000A;  &lt;bucket&gt;mybucket&lt;/bucket&gt;&#x000A;  &lt;content_length&gt;112766&lt;/content_length&gt;&#x000A;  &lt;content_type&gt;text/plain&lt;/content_type&gt;&#x000A;  &lt;last_modified&gt;&lt;/last_modified&gt;&#x000A;  &lt;user_metadata&gt;&#x000A;    &lt;entry key='x-amz-meta-author'&gt;&#x000A;      &lt;![CDATA[jjs]]&gt;&#x000A;    &lt;/entry&gt;&#x000A;    &lt;entry key='x-amz-meta-version'&gt;&#x000A;      &lt;![CDATA[2.2]]&gt;&#x000A;    &lt;/entry&gt;&#x000A;  &lt;/user_metadata&gt;&#x000A;  &lt;content href='http://localhost:3001/api/buckets/mybucket/12Jul2011blob/content'&gt;&#x000A;  &lt;/content&gt;&#x000A;&lt;/blob&gt;&#x000A;</code></pre>
        
        <h4 id="h4_3_9"><code>DELETE /api/buckets/:bucket_id/:blob_id</code></h4>
        
        <p>This call deletes the specified <strong><em>blob</em></strong> object from the back-end cloud. The names
        of the <strong><em>blob</em></strong> and the <strong><em>bucket</em></strong> in which this exists are specified the in call
        URI. After a succesful operation the Deltacloud server will respond with a <code>HTTP 204</code>
         (No Content) with no message body.</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>DELETE /api/buckets/mybucket/12Jul2011blob?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1 (i386-redhat-linux-gnu)&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;Connection: close&#x000A;Server: thin 1.2.11&#x000A;</code></pre>
        
        <h4 id="h4_3_10"><code>HEAD /api/buckets/:bucket_id/:blob_id</code></h4>
        
        <p>The <code>HTTP HEAD</code> operation on a specified <strong><em>blob</em></strong> URI will return all user defined
        metadata fields. As per <a href="http://www.ietf.org/rfc/rfc2616.txt" title="RFC 2616 HTTP/1.1">RFC 2616</a>
        this <code>HEAD</code> operation does not return a message body. Rather, the <strong><em>blob</em></strong> user
        metadata values are returned in the response <strong><em>X-Deltacloud-Blobmeta-</em></strong>
        headers (e.g., X-Deltacloud-Blobmeta-version:1.2).</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>HEAD /api/buckets/mybucket/myblob?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;X-Deltacloud-Blobmeta-version: 1.21&#x000A;X-Deltacloud-Blobmeta-author: jrd&#x000A;</code></pre>
        
        <h4 id="h4_3_11"><code>POST /api/buckets/:bucket_id/:blob_id</code></h4>
        
        <p>A <code>POST</code> operation on the URI of a <strong><em>blob</em></strong> allows a client to update the user-defined
        <strong><em>blob metadata</em></strong>. Note that this operation will overwrite all previously set
        user-metadata values (if any) and replace them with those specified in this call.
        The client must set the user-defined metadata in the <strong><em>X-Deltacloud-Blobmeta-</em></strong>
        headers (e.g., X-Deltacloud-Blobmeta-Model:2012).</p>
        
        <p><code>Example request:</code></p>
        
        <pre><code>POST /api/buckets/mybucket/myblob?format=xml HTTP/1.1&#x000A;Authorization: Basic AU1J3UB2121Afd1DdyQWxLaTYTmJMNF4zTXBoRGdhMDh2RUw5ZDAN9zVXVa==&#x000A;User-Agent: curl/7.20.1&#x000A;Host: localhost:3001&#x000A;Accept: */*&#x000A;X-Deltacloud-Blobmeta-model: 2012&#x000A;X-Deltacloud-Blobmeta-paint: Stannite_Grey&#x000A;</code></pre>
        
        <p><code>Server response:</code></p>
        
        <pre><code>HTTP/1.1 204 No Content&#x000A;X-Deltacloud-Blobmeta-model: 2012&#x000A;X-Deltacloud-Blobmeta-paint: Stannite_Grey&#x000A;</code></pre>
        
        <br />
        
        
        <p><a href="#toc">Contents</a></p>
        
        <br />
        
        
        <hr />
      </div>
    </div>
    <div id='footer-deltacloud'>
      <div class='container'>
        <p>
          <a href='http://incubator.apache.org'>
            <img alt='Apache Incubator Logo' src='http://incubator.apache.org/images/apache-incubator-logo.png' />
          </a>
        </p>
        <p id='disclaimer'>
          Apache Deltacloud is an effort undergoing incubation at The
          Apache Software Foundation (ASF), sponsored by the name of
          sponsor. Incubation is required of all newly accepted projects
          until a further review indicates that the infrastructure,
          communications, and decision making process have stabilized in a
          manner consistent with other successful ASF projects. While
          incubation status is not necessarily a reflection of the
          completeness or stability of the code, it does indicate that the
          project has yet to be fully endorsed by the ASF.
        </p>
      </div>
    </div>
  </body>
</html>
